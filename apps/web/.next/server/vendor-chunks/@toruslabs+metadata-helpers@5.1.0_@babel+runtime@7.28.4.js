"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4";
exports.ids = ["vendor-chunks/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4/node_modules/@toruslabs/metadata-helpers/dist/metadataHelpers.esm.js":
/*!*************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4/node_modules/@toruslabs/metadata-helpers/dist/metadataHelpers.esm.js ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptData: () => (/* binding */ decryptData),\n/* harmony export */   \"default\": () => (/* binding */ MetadataStorageLayer),\n/* harmony export */   ec: () => (/* binding */ ec),\n/* harmony export */   encParamsBufToHex: () => (/* binding */ encParamsBufToHex),\n/* harmony export */   encParamsHexToBuf: () => (/* binding */ encParamsHexToBuf),\n/* harmony export */   encryptAndSetData: () => (/* binding */ encryptAndSetData),\n/* harmony export */   encryptData: () => (/* binding */ encryptData),\n/* harmony export */   getAndDecryptData: () => (/* binding */ getAndDecryptData),\n/* harmony export */   getDeviceShare: () => (/* binding */ getDeviceShare),\n/* harmony export */   getTorusShare: () => (/* binding */ getTorusShare),\n/* harmony export */   keccak256: () => (/* binding */ keccak256),\n/* harmony export */   setDeviceShare: () => (/* binding */ setDeviceShare),\n/* harmony export */   setTorusShare: () => (/* binding */ setTorusShare)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"(ssr)/../../node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/objectSpread2.js\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/../../node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @toruslabs/http-helpers */ \"(ssr)/../../node_modules/.pnpm/@toruslabs+http-helpers@6.1.1_@babel+runtime@7.28.4/node_modules/@toruslabs/http-helpers/dist/httpHelpers.esm.js\");\n/* harmony import */ var json_stable_stringify__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! json-stable-stringify */ \"(ssr)/../../node_modules/.pnpm/json-stable-stringify@1.3.0/node_modules/json-stable-stringify/index.js\");\n/* harmony import */ var json_stable_stringify__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(json_stable_stringify__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! elliptic */ \"(ssr)/../../node_modules/.pnpm/elliptic@6.6.1/node_modules/elliptic/lib/elliptic.js\");\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(elliptic__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var ethereum_cryptography_keccak__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ethereum-cryptography/keccak */ \"(ssr)/../../node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/keccak.js\");\n/* harmony import */ var _toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @toruslabs/eccrypto */ \"(ssr)/../../node_modules/.pnpm/@toruslabs+eccrypto@4.0.0/node_modules/@toruslabs/eccrypto/dist/eccrypto.esm.js\");\n\n\n\n\n\n\n\n\nfunction keccak256(a) {\n  return Buffer.from((0,ethereum_cryptography_keccak__WEBPACK_IMPORTED_MODULE_5__.keccak256)(a));\n}\nconst ec = new elliptic__WEBPACK_IMPORTED_MODULE_4__.ec(\"secp256k1\");\n\nclass MetadataStorageLayer {\n  // ms\n\n  constructor() {\n    let metadataHost = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"https://metadata.tor.us\";\n    let serverTimeOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"metadataHost\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"serverTimeOffset\", void 0);\n    this.metadataHost = metadataHost;\n    this.serverTimeOffset = serverTimeOffset;\n  }\n  static setAPIKey(apiKey) {\n    (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.setAPIKey)(apiKey);\n  }\n  static setEmbedHost(embedHost) {\n    (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.setEmbedHost)(embedHost);\n  }\n  generateMetadataParams(message, privateKeyHex) {\n    var _sig$recoveryParam$to, _sig$recoveryParam;\n    const key = ec.keyFromPrivate(privateKeyHex, \"hex\");\n    const setData = {\n      data: message,\n      timestamp: Math.floor(this.serverTimeOffset + Date.now() / 1000).toString(16)\n    };\n    const sig = key.sign(keccak256(Buffer.from(json_stable_stringify__WEBPACK_IMPORTED_MODULE_3___default()(setData), \"utf8\")));\n    return {\n      pub_key_X: key.getPublic().getX().toString(16, 64),\n      pub_key_Y: key.getPublic().getY().toString(16, 64),\n      set_data: setData,\n      signature: Buffer.from(sig.r.toString(16, 64) + sig.s.toString(16, 64) + ((_sig$recoveryParam$to = (_sig$recoveryParam = sig.recoveryParam) === null || _sig$recoveryParam === void 0 ? void 0 : _sig$recoveryParam.toString(16).padStart(2, \"0\").slice(-2)) !== null && _sig$recoveryParam$to !== void 0 ? _sig$recoveryParam$to : \"00\"), \"hex\").toString(\"base64\")\n    };\n  }\n  generatePubKeyParams(privateKeyHex) {\n    const key = ec.keyFromPrivate(privateKeyHex, \"hex\");\n    return {\n      pub_key_X: key.getPublic().getX().toString(16, 64),\n      pub_key_Y: key.getPublic().getY().toString(16, 64)\n    };\n  }\n  async setMetadata(data, namespace, options) {\n    const params = namespace !== null ? _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, data), {}, {\n      namespace\n    }) : data;\n    const metadataResponse = await (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.post)(`${this.metadataHost}/set`, params, options, {\n      useAPIKey: true\n    });\n    return metadataResponse.message;\n  }\n  async getMetadata(pubKey, namespace, options) {\n    const params = namespace !== null ? _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, pubKey), {}, {\n      namespace\n    }) : pubKey;\n    const metadataResponse = await (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.post)(`${this.metadataHost}/get`, params, options, {\n      useAPIKey: true\n    });\n    return metadataResponse.message;\n  }\n}\n\nconst WEBAUTHN_TORUS_SHARE = \"webauthn_torus_share\";\nconst WEBAUTHN_DEVICE_SHARE = \"webauthn_device_share\";\nfunction encParamsHexToBuf(encParamsHex) {\n  return {\n    iv: Buffer.from(encParamsHex.iv, \"hex\"),\n    ephemPublicKey: Buffer.from(encParamsHex.ephemPublicKey, \"hex\"),\n    ciphertext: Buffer.from(encParamsHex.ciphertext, \"hex\"),\n    mac: Buffer.from(encParamsHex.mac, \"hex\")\n  };\n}\nfunction encParamsBufToHex(encParams) {\n  return {\n    iv: Buffer.from(encParams.iv).toString(\"hex\"),\n    ephemPublicKey: Buffer.from(encParams.ephemPublicKey).toString(\"hex\"),\n    ciphertext: Buffer.from(encParams.ciphertext).toString(\"hex\"),\n    mac: Buffer.from(encParams.mac).toString(\"hex\")\n  };\n}\nasync function encryptData(privKeyHex, d) {\n  const serializedDec = JSON.stringify(d);\n  const serializedBuf = Buffer.from(serializedDec, \"utf-8\");\n  const encParams = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.encrypt)((0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.getPublic)(Buffer.from(privKeyHex, \"hex\")), serializedBuf);\n  const encParamsHex = encParamsBufToHex(encParams);\n  const sData = JSON.stringify(encParamsHex);\n  return sData;\n}\nasync function decryptData(privKeyHex, d) {\n  const encParamsHex = JSON.parse(d);\n  const encParams = encParamsHexToBuf(encParamsHex);\n  const keyPair = ec.keyFromPrivate(privKeyHex);\n  const serializedBuf = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.decrypt)(Buffer.from(keyPair.getPrivate().toString(\"hex\", 64), \"hex\"), encParams);\n  const serializedDec = serializedBuf.toString(\"utf-8\");\n  const data = JSON.parse(serializedDec);\n  return data;\n}\nasync function getAndDecryptData(m, privKeyHex, namespace) {\n  const keyPair = ec.keyFromPrivate(privKeyHex, \"hex\");\n  const pubKey = keyPair.getPublic();\n  const serializedData = await m.getMetadata({\n    pub_key_X: pubKey.getX().toString(16, 64),\n    pub_key_Y: pubKey.getY().toString(16, 64)\n  }, namespace);\n  if (!serializedData) {\n    return null;\n  }\n  const data = await decryptData(privKeyHex, serializedData);\n  return data;\n}\nasync function encryptAndSetData(m, privKeyHex, d, namespace) {\n  const sData = await encryptData(privKeyHex, d);\n  const metadataParams = m.generateMetadataParams(sData, privKeyHex);\n  await m.setMetadata(metadataParams, namespace);\n}\nasync function setTorusShare(m, webAuthnPubKey, webAuthnRefHex, subspace, subspaceData) {\n  const refKeyPair = ec.keyFromPrivate(webAuthnRefHex);\n  const privKey = refKeyPair.getPrivate();\n  const pubKey = ec.keyFromPublic({\n    x: webAuthnPubKey.pub_key_X,\n    y: webAuthnPubKey.pub_key_Y\n  });\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_TORUS_SHARE);\n  let d = {};\n  if (data) d = data;\n  const serializedSubspaceData = JSON.stringify(subspaceData);\n  const serializedSubspaceDataBuf = Buffer.from(serializedSubspaceData, \"utf-8\");\n  const encSubspaceData = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.encrypt)(Buffer.from(pubKey.getPublic(\"hex\"), \"hex\"), serializedSubspaceDataBuf);\n  const encSubspaceDataHex = encParamsBufToHex(encSubspaceData);\n  d[subspace] = encSubspaceDataHex;\n  await encryptAndSetData(m, privKey.toString(\"hex\", 64), d, WEBAUTHN_TORUS_SHARE);\n}\nasync function setDeviceShare(m, webAuthnRefHex, subspace, subspaceData) {\n  const keyPair = ec.keyFromPrivate(webAuthnRefHex);\n  const privKey = keyPair.getPrivate();\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_DEVICE_SHARE);\n  let d = {};\n  if (data) d = data;\n  d[subspace] = subspaceData;\n  await encryptAndSetData(m, privKey.toString(\"hex\", 64), d, WEBAUTHN_DEVICE_SHARE);\n}\nasync function getTorusShare(m, webAuthnKeyHex, webAuthnRefHex, subspace) {\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_TORUS_SHARE);\n  if (!data) return null;\n  const encParamsHex = data[subspace];\n  if (!encParamsHex) return null;\n  const encParams = encParamsHexToBuf(encParamsHex);\n  const keyPair = ec.keyFromPrivate(webAuthnKeyHex);\n  const privKey = keyPair.getPrivate();\n  const serializedSubspaceDataBuf = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.decrypt)(Buffer.from(privKey.toString(\"hex\", 64), \"hex\"), encParams);\n  const serializedSubspaceData = serializedSubspaceDataBuf.toString(\"utf-8\");\n  const subspaceData = JSON.parse(serializedSubspaceData);\n  return subspaceData;\n}\nasync function getDeviceShare(m, webAuthnRefHex, subspace) {\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_DEVICE_SHARE);\n  if (data) return data[subspace];\n  return null;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0B0b3J1c2xhYnMrbWV0YWRhdGEtaGVscGVyc0A1LjEuMF9AYmFiZWwrcnVudGltZUA3LjI4LjQvbm9kZV9tb2R1bGVzL0B0b3J1c2xhYnMvbWV0YWRhdGEtaGVscGVycy9kaXN0L21ldGFkYXRhSGVscGVycy5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ0c7QUFDSTtBQUMxQjtBQUNSO0FBQ2tDO0FBQ047O0FBRWxFO0FBQ0EscUJBQXFCLHVFQUFXO0FBQ2hDO0FBQ0EsZUFBZSx3Q0FBSTs7QUFFbkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDRFQUFlO0FBQ25CLElBQUksNEVBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBLElBQUkscUVBQVk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyw0REFBUztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMkVBQWEsQ0FBQywyRUFBYSxHQUFHLFdBQVc7QUFDakY7QUFDQSxLQUFLO0FBQ0wsbUNBQW1DLDZEQUFJLElBQUksa0JBQWtCO0FBQzdEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywyRUFBYSxDQUFDLDJFQUFhLEdBQUcsYUFBYTtBQUNuRjtBQUNBLEtBQUs7QUFDTCxtQ0FBbUMsNkRBQUksSUFBSSxrQkFBa0I7QUFDN0Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw0REFBTyxDQUFDLDhEQUFTO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNERBQU87QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDREQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyw0REFBTztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRThOIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNvbGxlY3RpYmxlL3dlYi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHRvcnVzbGFicyttZXRhZGF0YS1oZWxwZXJzQDUuMS4wX0BiYWJlbCtydW50aW1lQDcuMjguNC9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9tZXRhZGF0YS1oZWxwZXJzL2Rpc3QvbWV0YWRhdGFIZWxwZXJzLmVzbS5qcz9mYTk3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0U3ByZWFkMic7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknO1xuaW1wb3J0IHsgc2V0QVBJS2V5LCBzZXRFbWJlZEhvc3QsIHBvc3QgfSBmcm9tICdAdG9ydXNsYWJzL2h0dHAtaGVscGVycyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJ2pzb24tc3RhYmxlLXN0cmluZ2lmeSc7XG5pbXBvcnQgeyBlYyBhcyBlYyQxIH0gZnJvbSAnZWxsaXB0aWMnO1xuaW1wb3J0IHsga2VjY2FrMjU2IGFzIGtlY2NhazI1NiQxIH0gZnJvbSAnZXRoZXJldW0tY3J5cHRvZ3JhcGh5L2tlY2Nhayc7XG5pbXBvcnQgeyBlbmNyeXB0LCBnZXRQdWJsaWMsIGRlY3J5cHQgfSBmcm9tICdAdG9ydXNsYWJzL2VjY3J5cHRvJztcblxuZnVuY3Rpb24ga2VjY2FrMjU2KGEpIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGtlY2NhazI1NiQxKGEpKTtcbn1cbmNvbnN0IGVjID0gbmV3IGVjJDEoXCJzZWNwMjU2azFcIik7XG5cbmNsYXNzIE1ldGFkYXRhU3RvcmFnZUxheWVyIHtcbiAgLy8gbXNcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgbWV0YWRhdGFIb3N0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBcImh0dHBzOi8vbWV0YWRhdGEudG9yLnVzXCI7XG4gICAgbGV0IHNlcnZlclRpbWVPZmZzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFIb3N0XCIsIHZvaWQgMCk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic2VydmVyVGltZU9mZnNldFwiLCB2b2lkIDApO1xuICAgIHRoaXMubWV0YWRhdGFIb3N0ID0gbWV0YWRhdGFIb3N0O1xuICAgIHRoaXMuc2VydmVyVGltZU9mZnNldCA9IHNlcnZlclRpbWVPZmZzZXQ7XG4gIH1cbiAgc3RhdGljIHNldEFQSUtleShhcGlLZXkpIHtcbiAgICBzZXRBUElLZXkoYXBpS2V5KTtcbiAgfVxuICBzdGF0aWMgc2V0RW1iZWRIb3N0KGVtYmVkSG9zdCkge1xuICAgIHNldEVtYmVkSG9zdChlbWJlZEhvc3QpO1xuICB9XG4gIGdlbmVyYXRlTWV0YWRhdGFQYXJhbXMobWVzc2FnZSwgcHJpdmF0ZUtleUhleCkge1xuICAgIHZhciBfc2lnJHJlY292ZXJ5UGFyYW0kdG8sIF9zaWckcmVjb3ZlcnlQYXJhbTtcbiAgICBjb25zdCBrZXkgPSBlYy5rZXlGcm9tUHJpdmF0ZShwcml2YXRlS2V5SGV4LCBcImhleFwiKTtcbiAgICBjb25zdCBzZXREYXRhID0ge1xuICAgICAgZGF0YTogbWVzc2FnZSxcbiAgICAgIHRpbWVzdGFtcDogTWF0aC5mbG9vcih0aGlzLnNlcnZlclRpbWVPZmZzZXQgKyBEYXRlLm5vdygpIC8gMTAwMCkudG9TdHJpbmcoMTYpXG4gICAgfTtcbiAgICBjb25zdCBzaWcgPSBrZXkuc2lnbihrZWNjYWsyNTYoQnVmZmVyLmZyb20oc3RyaW5naWZ5KHNldERhdGEpLCBcInV0ZjhcIikpKTtcbiAgICByZXR1cm4ge1xuICAgICAgcHViX2tleV9YOiBrZXkuZ2V0UHVibGljKCkuZ2V0WCgpLnRvU3RyaW5nKDE2LCA2NCksXG4gICAgICBwdWJfa2V5X1k6IGtleS5nZXRQdWJsaWMoKS5nZXRZKCkudG9TdHJpbmcoMTYsIDY0KSxcbiAgICAgIHNldF9kYXRhOiBzZXREYXRhLFxuICAgICAgc2lnbmF0dXJlOiBCdWZmZXIuZnJvbShzaWcuci50b1N0cmluZygxNiwgNjQpICsgc2lnLnMudG9TdHJpbmcoMTYsIDY0KSArICgoX3NpZyRyZWNvdmVyeVBhcmFtJHRvID0gKF9zaWckcmVjb3ZlcnlQYXJhbSA9IHNpZy5yZWNvdmVyeVBhcmFtKSA9PT0gbnVsbCB8fCBfc2lnJHJlY292ZXJ5UGFyYW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zaWckcmVjb3ZlcnlQYXJhbS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpLnNsaWNlKC0yKSkgIT09IG51bGwgJiYgX3NpZyRyZWNvdmVyeVBhcmFtJHRvICE9PSB2b2lkIDAgPyBfc2lnJHJlY292ZXJ5UGFyYW0kdG8gOiBcIjAwXCIpLCBcImhleFwiKS50b1N0cmluZyhcImJhc2U2NFwiKVxuICAgIH07XG4gIH1cbiAgZ2VuZXJhdGVQdWJLZXlQYXJhbXMocHJpdmF0ZUtleUhleCkge1xuICAgIGNvbnN0IGtleSA9IGVjLmtleUZyb21Qcml2YXRlKHByaXZhdGVLZXlIZXgsIFwiaGV4XCIpO1xuICAgIHJldHVybiB7XG4gICAgICBwdWJfa2V5X1g6IGtleS5nZXRQdWJsaWMoKS5nZXRYKCkudG9TdHJpbmcoMTYsIDY0KSxcbiAgICAgIHB1Yl9rZXlfWToga2V5LmdldFB1YmxpYygpLmdldFkoKS50b1N0cmluZygxNiwgNjQpXG4gICAgfTtcbiAgfVxuICBhc3luYyBzZXRNZXRhZGF0YShkYXRhLCBuYW1lc3BhY2UsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuYW1lc3BhY2UgIT09IG51bGwgPyBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEpLCB7fSwge1xuICAgICAgbmFtZXNwYWNlXG4gICAgfSkgOiBkYXRhO1xuICAgIGNvbnN0IG1ldGFkYXRhUmVzcG9uc2UgPSBhd2FpdCBwb3N0KGAke3RoaXMubWV0YWRhdGFIb3N0fS9zZXRgLCBwYXJhbXMsIG9wdGlvbnMsIHtcbiAgICAgIHVzZUFQSUtleTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBtZXRhZGF0YVJlc3BvbnNlLm1lc3NhZ2U7XG4gIH1cbiAgYXN5bmMgZ2V0TWV0YWRhdGEocHViS2V5LCBuYW1lc3BhY2UsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuYW1lc3BhY2UgIT09IG51bGwgPyBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHB1YktleSksIHt9LCB7XG4gICAgICBuYW1lc3BhY2VcbiAgICB9KSA6IHB1YktleTtcbiAgICBjb25zdCBtZXRhZGF0YVJlc3BvbnNlID0gYXdhaXQgcG9zdChgJHt0aGlzLm1ldGFkYXRhSG9zdH0vZ2V0YCwgcGFyYW1zLCBvcHRpb25zLCB7XG4gICAgICB1c2VBUElLZXk6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gbWV0YWRhdGFSZXNwb25zZS5tZXNzYWdlO1xuICB9XG59XG5cbmNvbnN0IFdFQkFVVEhOX1RPUlVTX1NIQVJFID0gXCJ3ZWJhdXRobl90b3J1c19zaGFyZVwiO1xuY29uc3QgV0VCQVVUSE5fREVWSUNFX1NIQVJFID0gXCJ3ZWJhdXRobl9kZXZpY2Vfc2hhcmVcIjtcbmZ1bmN0aW9uIGVuY1BhcmFtc0hleFRvQnVmKGVuY1BhcmFtc0hleCkge1xuICByZXR1cm4ge1xuICAgIGl2OiBCdWZmZXIuZnJvbShlbmNQYXJhbXNIZXguaXYsIFwiaGV4XCIpLFxuICAgIGVwaGVtUHVibGljS2V5OiBCdWZmZXIuZnJvbShlbmNQYXJhbXNIZXguZXBoZW1QdWJsaWNLZXksIFwiaGV4XCIpLFxuICAgIGNpcGhlcnRleHQ6IEJ1ZmZlci5mcm9tKGVuY1BhcmFtc0hleC5jaXBoZXJ0ZXh0LCBcImhleFwiKSxcbiAgICBtYWM6IEJ1ZmZlci5mcm9tKGVuY1BhcmFtc0hleC5tYWMsIFwiaGV4XCIpXG4gIH07XG59XG5mdW5jdGlvbiBlbmNQYXJhbXNCdWZUb0hleChlbmNQYXJhbXMpIHtcbiAgcmV0dXJuIHtcbiAgICBpdjogQnVmZmVyLmZyb20oZW5jUGFyYW1zLml2KS50b1N0cmluZyhcImhleFwiKSxcbiAgICBlcGhlbVB1YmxpY0tleTogQnVmZmVyLmZyb20oZW5jUGFyYW1zLmVwaGVtUHVibGljS2V5KS50b1N0cmluZyhcImhleFwiKSxcbiAgICBjaXBoZXJ0ZXh0OiBCdWZmZXIuZnJvbShlbmNQYXJhbXMuY2lwaGVydGV4dCkudG9TdHJpbmcoXCJoZXhcIiksXG4gICAgbWFjOiBCdWZmZXIuZnJvbShlbmNQYXJhbXMubWFjKS50b1N0cmluZyhcImhleFwiKVxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZW5jcnlwdERhdGEocHJpdktleUhleCwgZCkge1xuICBjb25zdCBzZXJpYWxpemVkRGVjID0gSlNPTi5zdHJpbmdpZnkoZCk7XG4gIGNvbnN0IHNlcmlhbGl6ZWRCdWYgPSBCdWZmZXIuZnJvbShzZXJpYWxpemVkRGVjLCBcInV0Zi04XCIpO1xuICBjb25zdCBlbmNQYXJhbXMgPSBhd2FpdCBlbmNyeXB0KGdldFB1YmxpYyhCdWZmZXIuZnJvbShwcml2S2V5SGV4LCBcImhleFwiKSksIHNlcmlhbGl6ZWRCdWYpO1xuICBjb25zdCBlbmNQYXJhbXNIZXggPSBlbmNQYXJhbXNCdWZUb0hleChlbmNQYXJhbXMpO1xuICBjb25zdCBzRGF0YSA9IEpTT04uc3RyaW5naWZ5KGVuY1BhcmFtc0hleCk7XG4gIHJldHVybiBzRGF0YTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGRlY3J5cHREYXRhKHByaXZLZXlIZXgsIGQpIHtcbiAgY29uc3QgZW5jUGFyYW1zSGV4ID0gSlNPTi5wYXJzZShkKTtcbiAgY29uc3QgZW5jUGFyYW1zID0gZW5jUGFyYW1zSGV4VG9CdWYoZW5jUGFyYW1zSGV4KTtcbiAgY29uc3Qga2V5UGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHByaXZLZXlIZXgpO1xuICBjb25zdCBzZXJpYWxpemVkQnVmID0gYXdhaXQgZGVjcnlwdChCdWZmZXIuZnJvbShrZXlQYWlyLmdldFByaXZhdGUoKS50b1N0cmluZyhcImhleFwiLCA2NCksIFwiaGV4XCIpLCBlbmNQYXJhbXMpO1xuICBjb25zdCBzZXJpYWxpemVkRGVjID0gc2VyaWFsaXplZEJ1Zi50b1N0cmluZyhcInV0Zi04XCIpO1xuICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzZXJpYWxpemVkRGVjKTtcbiAgcmV0dXJuIGRhdGE7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRBbmREZWNyeXB0RGF0YShtLCBwcml2S2V5SGV4LCBuYW1lc3BhY2UpIHtcbiAgY29uc3Qga2V5UGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHByaXZLZXlIZXgsIFwiaGV4XCIpO1xuICBjb25zdCBwdWJLZXkgPSBrZXlQYWlyLmdldFB1YmxpYygpO1xuICBjb25zdCBzZXJpYWxpemVkRGF0YSA9IGF3YWl0IG0uZ2V0TWV0YWRhdGEoe1xuICAgIHB1Yl9rZXlfWDogcHViS2V5LmdldFgoKS50b1N0cmluZygxNiwgNjQpLFxuICAgIHB1Yl9rZXlfWTogcHViS2V5LmdldFkoKS50b1N0cmluZygxNiwgNjQpXG4gIH0sIG5hbWVzcGFjZSk7XG4gIGlmICghc2VyaWFsaXplZERhdGEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBkYXRhID0gYXdhaXQgZGVjcnlwdERhdGEocHJpdktleUhleCwgc2VyaWFsaXplZERhdGEpO1xuICByZXR1cm4gZGF0YTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuY3J5cHRBbmRTZXREYXRhKG0sIHByaXZLZXlIZXgsIGQsIG5hbWVzcGFjZSkge1xuICBjb25zdCBzRGF0YSA9IGF3YWl0IGVuY3J5cHREYXRhKHByaXZLZXlIZXgsIGQpO1xuICBjb25zdCBtZXRhZGF0YVBhcmFtcyA9IG0uZ2VuZXJhdGVNZXRhZGF0YVBhcmFtcyhzRGF0YSwgcHJpdktleUhleCk7XG4gIGF3YWl0IG0uc2V0TWV0YWRhdGEobWV0YWRhdGFQYXJhbXMsIG5hbWVzcGFjZSk7XG59XG5hc3luYyBmdW5jdGlvbiBzZXRUb3J1c1NoYXJlKG0sIHdlYkF1dGhuUHViS2V5LCB3ZWJBdXRoblJlZkhleCwgc3Vic3BhY2UsIHN1YnNwYWNlRGF0YSkge1xuICBjb25zdCByZWZLZXlQYWlyID0gZWMua2V5RnJvbVByaXZhdGUod2ViQXV0aG5SZWZIZXgpO1xuICBjb25zdCBwcml2S2V5ID0gcmVmS2V5UGFpci5nZXRQcml2YXRlKCk7XG4gIGNvbnN0IHB1YktleSA9IGVjLmtleUZyb21QdWJsaWMoe1xuICAgIHg6IHdlYkF1dGhuUHViS2V5LnB1Yl9rZXlfWCxcbiAgICB5OiB3ZWJBdXRoblB1YktleS5wdWJfa2V5X1lcbiAgfSk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBbmREZWNyeXB0RGF0YShtLCB3ZWJBdXRoblJlZkhleCwgV0VCQVVUSE5fVE9SVVNfU0hBUkUpO1xuICBsZXQgZCA9IHt9O1xuICBpZiAoZGF0YSkgZCA9IGRhdGE7XG4gIGNvbnN0IHNlcmlhbGl6ZWRTdWJzcGFjZURhdGEgPSBKU09OLnN0cmluZ2lmeShzdWJzcGFjZURhdGEpO1xuICBjb25zdCBzZXJpYWxpemVkU3Vic3BhY2VEYXRhQnVmID0gQnVmZmVyLmZyb20oc2VyaWFsaXplZFN1YnNwYWNlRGF0YSwgXCJ1dGYtOFwiKTtcbiAgY29uc3QgZW5jU3Vic3BhY2VEYXRhID0gYXdhaXQgZW5jcnlwdChCdWZmZXIuZnJvbShwdWJLZXkuZ2V0UHVibGljKFwiaGV4XCIpLCBcImhleFwiKSwgc2VyaWFsaXplZFN1YnNwYWNlRGF0YUJ1Zik7XG4gIGNvbnN0IGVuY1N1YnNwYWNlRGF0YUhleCA9IGVuY1BhcmFtc0J1ZlRvSGV4KGVuY1N1YnNwYWNlRGF0YSk7XG4gIGRbc3Vic3BhY2VdID0gZW5jU3Vic3BhY2VEYXRhSGV4O1xuICBhd2FpdCBlbmNyeXB0QW5kU2V0RGF0YShtLCBwcml2S2V5LnRvU3RyaW5nKFwiaGV4XCIsIDY0KSwgZCwgV0VCQVVUSE5fVE9SVVNfU0hBUkUpO1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0RGV2aWNlU2hhcmUobSwgd2ViQXV0aG5SZWZIZXgsIHN1YnNwYWNlLCBzdWJzcGFjZURhdGEpIHtcbiAgY29uc3Qga2V5UGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHdlYkF1dGhuUmVmSGV4KTtcbiAgY29uc3QgcHJpdktleSA9IGtleVBhaXIuZ2V0UHJpdmF0ZSgpO1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QW5kRGVjcnlwdERhdGEobSwgd2ViQXV0aG5SZWZIZXgsIFdFQkFVVEhOX0RFVklDRV9TSEFSRSk7XG4gIGxldCBkID0ge307XG4gIGlmIChkYXRhKSBkID0gZGF0YTtcbiAgZFtzdWJzcGFjZV0gPSBzdWJzcGFjZURhdGE7XG4gIGF3YWl0IGVuY3J5cHRBbmRTZXREYXRhKG0sIHByaXZLZXkudG9TdHJpbmcoXCJoZXhcIiwgNjQpLCBkLCBXRUJBVVRITl9ERVZJQ0VfU0hBUkUpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VG9ydXNTaGFyZShtLCB3ZWJBdXRobktleUhleCwgd2ViQXV0aG5SZWZIZXgsIHN1YnNwYWNlKSB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRBbmREZWNyeXB0RGF0YShtLCB3ZWJBdXRoblJlZkhleCwgV0VCQVVUSE5fVE9SVVNfU0hBUkUpO1xuICBpZiAoIWRhdGEpIHJldHVybiBudWxsO1xuICBjb25zdCBlbmNQYXJhbXNIZXggPSBkYXRhW3N1YnNwYWNlXTtcbiAgaWYgKCFlbmNQYXJhbXNIZXgpIHJldHVybiBudWxsO1xuICBjb25zdCBlbmNQYXJhbXMgPSBlbmNQYXJhbXNIZXhUb0J1ZihlbmNQYXJhbXNIZXgpO1xuICBjb25zdCBrZXlQYWlyID0gZWMua2V5RnJvbVByaXZhdGUod2ViQXV0aG5LZXlIZXgpO1xuICBjb25zdCBwcml2S2V5ID0ga2V5UGFpci5nZXRQcml2YXRlKCk7XG4gIGNvbnN0IHNlcmlhbGl6ZWRTdWJzcGFjZURhdGFCdWYgPSBhd2FpdCBkZWNyeXB0KEJ1ZmZlci5mcm9tKHByaXZLZXkudG9TdHJpbmcoXCJoZXhcIiwgNjQpLCBcImhleFwiKSwgZW5jUGFyYW1zKTtcbiAgY29uc3Qgc2VyaWFsaXplZFN1YnNwYWNlRGF0YSA9IHNlcmlhbGl6ZWRTdWJzcGFjZURhdGFCdWYudG9TdHJpbmcoXCJ1dGYtOFwiKTtcbiAgY29uc3Qgc3Vic3BhY2VEYXRhID0gSlNPTi5wYXJzZShzZXJpYWxpemVkU3Vic3BhY2VEYXRhKTtcbiAgcmV0dXJuIHN1YnNwYWNlRGF0YTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldERldmljZVNoYXJlKG0sIHdlYkF1dGhuUmVmSGV4LCBzdWJzcGFjZSkge1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QW5kRGVjcnlwdERhdGEobSwgd2ViQXV0aG5SZWZIZXgsIFdFQkFVVEhOX0RFVklDRV9TSEFSRSk7XG4gIGlmIChkYXRhKSByZXR1cm4gZGF0YVtzdWJzcGFjZV07XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgeyBkZWNyeXB0RGF0YSwgTWV0YWRhdGFTdG9yYWdlTGF5ZXIgYXMgZGVmYXVsdCwgZWMsIGVuY1BhcmFtc0J1ZlRvSGV4LCBlbmNQYXJhbXNIZXhUb0J1ZiwgZW5jcnlwdEFuZFNldERhdGEsIGVuY3J5cHREYXRhLCBnZXRBbmREZWNyeXB0RGF0YSwgZ2V0RGV2aWNlU2hhcmUsIGdldFRvcnVzU2hhcmUsIGtlY2NhazI1Niwgc2V0RGV2aWNlU2hhcmUsIHNldFRvcnVzU2hhcmUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4/node_modules/@toruslabs/metadata-helpers/dist/metadataHelpers.esm.js\n");

/***/ })

};
;