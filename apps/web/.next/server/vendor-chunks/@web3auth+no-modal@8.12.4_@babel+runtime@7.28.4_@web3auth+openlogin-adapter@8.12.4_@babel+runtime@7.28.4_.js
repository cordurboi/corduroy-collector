"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@web3auth+no-modal@8.12.4_@babel+runtime@7.28.4_@web3auth+openlogin-adapter@8.12.4_@babel+runtime@7.28.4_";
exports.ids = ["vendor-chunks/@web3auth+no-modal@8.12.4_@babel+runtime@7.28.4_@web3auth+openlogin-adapter@8.12.4_@babel+runtime@7.28.4_"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@web3auth+no-modal@8.12.4_@babel+runtime@7.28.4_@web3auth+openlogin-adapter@8.12.4_@babel+runtime@7.28.4_/node_modules/@web3auth/no-modal/dist/noModal.esm.js":
/*!**********************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@web3auth+no-modal@8.12.4_@babel+runtime@7.28.4_@web3auth+openlogin-adapter@8.12.4_@babel+runtime@7.28.4_/node_modules/@web3auth/no-modal/dist/noModal.esm.js ***!
  \**********************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Web3AuthNoModal: () => (/* binding */ Web3AuthNoModal)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"(ssr)/../../node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/objectSpread2.js\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/../../node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @toruslabs/openlogin-jrpc */ \"(ssr)/../../node_modules/.pnpm/@toruslabs+openlogin-jrpc@8.3.0_@babel+runtime@7.28.4/node_modules/@toruslabs/openlogin-jrpc/dist/openloginJrpc.esm.js\");\n/* harmony import */ var _web3auth_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @web3auth/base */ \"(ssr)/../../node_modules/.pnpm/@web3auth+base@8.12.4_@babel+runtime@7.28.4/node_modules/@web3auth/base/dist/base.esm.js\");\n/* harmony import */ var _web3auth_base_provider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @web3auth/base-provider */ \"(ssr)/../../node_modules/.pnpm/@web3auth+base-provider@8.12.4_@babel+runtime@7.28.4/node_modules/@web3auth/base-provider/dist/baseProvider.esm.js\");\n/* harmony import */ var _web3auth_openlogin_adapter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @web3auth/openlogin-adapter */ \"(ssr)/../../node_modules/.pnpm/@web3auth+openlogin-adapter@8.12.4_@babel+runtime@7.28.4/node_modules/@web3auth/openlogin-adapter/dist/openloginAdapter.esm.js\");\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash.clonedeep */ \"(ssr)/../../node_modules/.pnpm/lodash.clonedeep@4.5.0/node_modules/lodash.clonedeep/index.js\");\n/* harmony import */ var lodash_clonedeep__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_clonedeep__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash.merge */ \"(ssr)/../../node_modules/.pnpm/lodash.merge@4.6.2/node_modules/lodash.merge/index.js\");\n/* harmony import */ var lodash_merge__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_merge__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n\nconst ADAPTER_CACHE_KEY = \"Web3Auth-cachedAdapter\";\nclass Web3AuthNoModal extends _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_2__.SafeEventEmitter {\n  constructor(options) {\n    var _options$chainConfig, _options$chainConfig2, _options$chainConfig3, _options$chainConfig4;\n    super();\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"coreOptions\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"connectedAdapterName\", null);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"status\", _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.NOT_READY);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"cachedAdapter\", null);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"walletAdapters\", {});\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"commonJRPCProvider\", null);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"plugins\", {});\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"storage\", \"localStorage\");\n    if (!options.clientId) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.invalidParams(\"Please provide a valid clientId in constructor\");\n    if (options.enableLogging) _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.enableAll();else _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.setLevel(\"error\");\n    if (!options.privateKeyProvider && !options.chainConfig) {\n      throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.invalidParams(\"Please provide chainConfig or privateKeyProvider\");\n    }\n    options.chainConfig = options.chainConfig || options.privateKeyProvider.currentChainConfig;\n    if (!((_options$chainConfig = options.chainConfig) !== null && _options$chainConfig !== void 0 && _options$chainConfig.chainNamespace) || !Object.values(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.CHAIN_NAMESPACES).includes((_options$chainConfig2 = options.chainConfig) === null || _options$chainConfig2 === void 0 ? void 0 : _options$chainConfig2.chainNamespace)) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.invalidParams(\"Please provide a valid chainNamespace in chainConfig\");\n    if (options.storageKey === \"session\") this.storage = \"sessionStorage\";\n    this.cachedAdapter = (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.storageAvailable)(this.storage) ? window[this.storage].getItem(ADAPTER_CACHE_KEY) : null;\n    this.coreOptions = _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, options), {}, {\n      chainConfig: _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.getChainConfig)((_options$chainConfig3 = options.chainConfig) === null || _options$chainConfig3 === void 0 ? void 0 : _options$chainConfig3.chainNamespace, (_options$chainConfig4 = options.chainConfig) === null || _options$chainConfig4 === void 0 ? void 0 : _options$chainConfig4.chainId) || {}), options.chainConfig)\n    });\n    this.subscribeToAdapterEvents = this.subscribeToAdapterEvents.bind(this);\n  }\n  get connected() {\n    return Boolean(this.connectedAdapterName);\n  }\n  get provider() {\n    if (this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.NOT_READY && this.commonJRPCProvider) {\n      return this.commonJRPCProvider;\n    }\n    return null;\n  }\n  set provider(_) {\n    throw new Error(\"Not implemented\");\n  }\n  async init() {\n    this.commonJRPCProvider = await _web3auth_base_provider__WEBPACK_IMPORTED_MODULE_4__.CommonJRPCProvider.getProviderInstance({\n      chainConfig: this.coreOptions.chainConfig\n    });\n    let projectConfig;\n    try {\n      projectConfig = await (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.fetchProjectConfig)(this.coreOptions.clientId, this.coreOptions.web3AuthNetwork);\n    } catch (e) {\n      _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.error(\"Failed to fetch project configurations\", e);\n      throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.notReady(\"failed to fetch project configurations\", e);\n    }\n    const initPromises = Object.keys(this.walletAdapters).map(async adapterName => {\n      this.subscribeToAdapterEvents(this.walletAdapters[adapterName]);\n      // if adapter doesn't have any chain config yet then set it based on provided namespace and chainId.\n      // if no chainNamespace or chainId is being provided, it will connect with mainnet.\n      if (!this.walletAdapters[adapterName].chainConfigProxy) {\n        const providedChainConfig = this.coreOptions.chainConfig;\n        if (!providedChainConfig.chainNamespace) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.invalidParams(\"Please provide chainNamespace in chainConfig\");\n        this.walletAdapters[adapterName].setAdapterSettings({\n          chainConfig: providedChainConfig,\n          sessionTime: this.coreOptions.sessionTime,\n          clientId: this.coreOptions.clientId,\n          web3AuthNetwork: this.coreOptions.web3AuthNetwork,\n          useCoreKitKey: this.coreOptions.useCoreKitKey\n        });\n      } else {\n        this.walletAdapters[adapterName].setAdapterSettings({\n          sessionTime: this.coreOptions.sessionTime,\n          clientId: this.coreOptions.clientId,\n          web3AuthNetwork: this.coreOptions.web3AuthNetwork,\n          useCoreKitKey: this.coreOptions.useCoreKitKey\n        });\n      }\n      if (adapterName === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WALLET_ADAPTERS.OPENLOGIN) {\n        const openloginAdapter = this.walletAdapters[adapterName];\n        const {\n          whitelabel\n        } = projectConfig;\n        this.coreOptions.uiConfig = lodash_merge__WEBPACK_IMPORTED_MODULE_7___default()(lodash_clonedeep__WEBPACK_IMPORTED_MODULE_6___default()(whitelabel), this.coreOptions.uiConfig);\n        if (!this.coreOptions.uiConfig.mode) this.coreOptions.uiConfig.mode = \"light\";\n        const {\n          sms_otp_enabled: smsOtpEnabled,\n          whitelist\n        } = projectConfig;\n        if (smsOtpEnabled !== undefined) {\n          openloginAdapter.setAdapterSettings({\n            loginConfig: {\n              [_web3auth_openlogin_adapter__WEBPACK_IMPORTED_MODULE_5__.LOGIN_PROVIDER.SMS_PASSWORDLESS]: {\n                showOnModal: smsOtpEnabled,\n                showOnDesktop: smsOtpEnabled,\n                showOnMobile: smsOtpEnabled,\n                showOnSocialBackupFactor: smsOtpEnabled\n              }\n            }\n          });\n        }\n        if (whitelist) {\n          openloginAdapter.setAdapterSettings({\n            originData: whitelist.signed_urls\n          });\n        }\n        if (this.coreOptions.privateKeyProvider) {\n          if (openloginAdapter.currentChainNamespace !== this.coreOptions.privateKeyProvider.currentChainConfig.chainNamespace) {\n            throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.incompatibleChainNameSpace(\"private key provider is not compatible with provided chainNamespace for openlogin adapter\");\n          }\n          openloginAdapter.setAdapterSettings({\n            privateKeyProvider: this.coreOptions.privateKeyProvider\n          });\n        }\n        openloginAdapter.setAdapterSettings({\n          whiteLabel: this.coreOptions.uiConfig\n        });\n        if (!openloginAdapter.privateKeyProvider) {\n          throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.invalidParams(\"privateKeyProvider is required for openlogin adapter\");\n        }\n      } else if (adapterName === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WALLET_ADAPTERS.WALLET_CONNECT_V2) {\n        const walletConnectAdapter = this.walletAdapters[adapterName];\n        const {\n          wallet_connect_enabled: walletConnectEnabled,\n          wallet_connect_project_id: walletConnectProjectId\n        } = projectConfig;\n        if (walletConnectEnabled === false) {\n          throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.invalidParams(\"Please enable wallet connect v2 addon on dashboard\");\n        }\n        if (!walletConnectProjectId) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.invalidParams(\"Invalid wallet connect project id. Please configure it on the dashboard\");\n        walletConnectAdapter.setAdapterSettings({\n          adapterSettings: {\n            walletConnectInitOptions: {\n              projectId: walletConnectProjectId\n            }\n          }\n        });\n      }\n      return this.walletAdapters[adapterName].init({\n        autoConnect: this.cachedAdapter === adapterName\n      }).catch(e => _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.error(e, adapterName));\n    });\n    await Promise.all(initPromises);\n    if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.NOT_READY) {\n      this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.READY;\n      this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.READY);\n    }\n  }\n  getAdapter(adapterName) {\n    return this.walletAdapters[adapterName] || null;\n  }\n  configureAdapter(adapter) {\n    this.checkInitRequirements();\n    const providedChainConfig = this.coreOptions.chainConfig;\n    if (!providedChainConfig.chainNamespace) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.invalidParams(\"Please provide chainNamespace in chainConfig\");\n    const adapterAlreadyExists = this.walletAdapters[adapter.name];\n    if (adapterAlreadyExists) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.duplicateAdapterError(`Wallet adapter for ${adapter.name} already exists`);\n    if (adapter.adapterNamespace !== _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_NAMESPACES.MULTICHAIN && adapter.adapterNamespace !== providedChainConfig.chainNamespace) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.incompatibleChainNameSpace(`This wallet adapter belongs to ${adapter.adapterNamespace} which is incompatible with currently used namespace: ${providedChainConfig.chainNamespace}`);\n    if (adapter.adapterNamespace === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_NAMESPACES.MULTICHAIN && adapter.currentChainNamespace && providedChainConfig.chainNamespace !== adapter.currentChainNamespace) {\n      // chainConfig checks are already validated in constructor so using typecast is safe here.\n      adapter.setAdapterSettings({\n        chainConfig: providedChainConfig\n      });\n    }\n    this.walletAdapters[adapter.name] = adapter;\n    return this;\n  }\n  clearCache() {\n    if (!(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.storageAvailable)(this.storage)) return;\n    window[this.storage].removeItem(ADAPTER_CACHE_KEY);\n    this.cachedAdapter = null;\n  }\n  async addChain(chainConfig) {\n    if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED && this.connectedAdapterName) return this.walletAdapters[this.connectedAdapterName].addChain(chainConfig);\n    if (this.commonJRPCProvider) {\n      return this.commonJRPCProvider.addChain(chainConfig);\n    }\n    throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.notReady(`No wallet is ready`);\n  }\n  async switchChain(params) {\n    if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED && this.connectedAdapterName) return this.walletAdapters[this.connectedAdapterName].switchChain(params);\n    if (this.commonJRPCProvider) {\n      return this.commonJRPCProvider.switchChain(params);\n    }\n    throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.notReady(`No wallet is ready`);\n  }\n\n  /**\n   * Connect to a specific wallet adapter\n   * @param walletName - Key of the walletAdapter to use.\n   */\n  async connectTo(walletName, loginParams) {\n    if (!this.walletAdapters[walletName] || !this.commonJRPCProvider) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.notFound(`Please add wallet adapter for ${walletName} wallet, before connecting`);\n    const provider = await this.walletAdapters[walletName].connect(loginParams);\n    this.commonJRPCProvider.updateProviderEngineProxy(provider.provider || provider);\n    return this.provider;\n  }\n  async logout(options = {\n    cleanup: false\n  }) {\n    if (this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletLoginError.notConnectedError(`No wallet is connected`);\n    await this.walletAdapters[this.connectedAdapterName].disconnect(options);\n  }\n  async getUserInfo() {\n    _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"Getting user info\", this.status, this.connectedAdapterName);\n    if (this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletLoginError.notConnectedError(`No wallet is connected`);\n    return this.walletAdapters[this.connectedAdapterName].getUserInfo();\n  }\n  async enableMFA(loginParams) {\n    if (this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletLoginError.notConnectedError(`No wallet is connected`);\n    if (this.connectedAdapterName !== _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WALLET_ADAPTERS.OPENLOGIN) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletLoginError.unsupportedOperation(`EnableMFA is not supported for this adapter.`);\n    return this.walletAdapters[this.connectedAdapterName].enableMFA(loginParams);\n  }\n  async authenticateUser() {\n    if (this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED || !this.connectedAdapterName) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletLoginError.notConnectedError(`No wallet is connected`);\n    return this.walletAdapters[this.connectedAdapterName].authenticateUser();\n  }\n  addPlugin(plugin) {\n    if (this.plugins[plugin.name]) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.duplicateAdapterError(`Plugin ${plugin.name} already exist`);\n    if (plugin.pluginNamespace !== _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.PLUGIN_NAMESPACES.MULTICHAIN && plugin.pluginNamespace !== this.coreOptions.chainConfig.chainNamespace) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.incompatibleChainNameSpace(`This plugin belongs to ${plugin.pluginNamespace} namespace which is incompatible with currently used namespace: ${this.coreOptions.chainConfig.chainNamespace}`);\n    this.plugins[plugin.name] = plugin;\n    if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED && this.connectedAdapterName) {\n      // web3auth is already connected. can initialize plugins\n      this.connectToPlugins({\n        adapter: this.connectedAdapterName\n      });\n    }\n    return this;\n  }\n  getPlugin(name) {\n    return this.plugins[name] || null;\n  }\n  subscribeToAdapterEvents(walletAdapter) {\n    walletAdapter.on(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.CONNECTED, async data => {\n      if (!this.commonJRPCProvider) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.notFound(`CommonJrpcProvider not found`);\n      const {\n        provider\n      } = data;\n      this.commonJRPCProvider.updateProviderEngineProxy(provider.provider || provider);\n      this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED;\n      this.connectedAdapterName = data.adapter;\n      this.cacheWallet(data.adapter);\n      _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"connected\", this.status, this.connectedAdapterName);\n      this.connectToPlugins(data);\n      this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.CONNECTED, _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, data));\n    });\n    walletAdapter.on(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.DISCONNECTED, async data => {\n      // get back to ready state for rehydrating.\n      this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.READY;\n      if ((0,_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.storageAvailable)(this.storage)) {\n        const cachedAdapter = window[this.storage].getItem(ADAPTER_CACHE_KEY);\n        if (this.connectedAdapterName === cachedAdapter) {\n          this.clearCache();\n        }\n      }\n      _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"disconnected\", this.status, this.connectedAdapterName);\n      await Promise.all(Object.values(this.plugins).map(plugin => {\n        return plugin.disconnect().catch(error => {\n          // swallow error if adapter doesn't supports this plugin.\n          if (error.code === 5211) {\n            return;\n          }\n          // throw error;\n          _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.error(error);\n        });\n      }));\n      this.connectedAdapterName = null;\n      this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.DISCONNECTED, data);\n    });\n    walletAdapter.on(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.CONNECTING, data => {\n      this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTING;\n      this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.CONNECTING, data);\n      _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"connecting\", this.status, this.connectedAdapterName);\n    });\n    walletAdapter.on(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.ERRORED, data => {\n      this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.ERRORED;\n      this.clearCache();\n      this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.ERRORED, data);\n      _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"errored\", this.status, this.connectedAdapterName);\n    });\n    walletAdapter.on(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, data => {\n      _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"adapter data updated\", data);\n      this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, data);\n    });\n    walletAdapter.on(_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_EVENTS.CACHE_CLEAR, data => {\n      _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"adapter cache clear\", data);\n      if ((0,_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.storageAvailable)(this.storage)) {\n        this.clearCache();\n      }\n    });\n  }\n  checkInitRequirements() {\n    if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTING) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.notReady(\"Already pending connection\");\n    if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.CONNECTED) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.notReady(\"Already connected\");\n    if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.ADAPTER_STATUS.READY) throw _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.WalletInitializationError.notReady(\"Adapter is already initialized\");\n  }\n  cacheWallet(walletName) {\n    if (!(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_3__.storageAvailable)(this.storage)) return;\n    window[this.storage].setItem(ADAPTER_CACHE_KEY, walletName);\n    this.cachedAdapter = walletName;\n  }\n  connectToPlugins(data) {\n    Object.values(this.plugins).map(async plugin => {\n      try {\n        if (!plugin.SUPPORTED_ADAPTERS.includes(data.adapter)) {\n          return;\n        }\n        if (plugin.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.PLUGIN_STATUS.CONNECTED) return;\n        const {\n          openloginInstance\n        } = this.walletAdapters[this.connectedAdapterName];\n        const {\n          options,\n          sessionId,\n          sessionNamespace\n        } = openloginInstance || {};\n        await plugin.initWithWeb3Auth(this, options.whiteLabel);\n        await plugin.connect({\n          sessionId,\n          sessionNamespace\n        });\n      } catch (error) {\n        // swallow error if connector adapter doesn't supports this plugin.\n        if (error.code === 5211) {\n          return;\n        }\n        _web3auth_base__WEBPACK_IMPORTED_MODULE_3__.log.error(error);\n      }\n    });\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3ZWIzYXV0aCtuby1tb2RhbEA4LjEyLjRfQGJhYmVsK3J1bnRpbWVANy4yOC40X0B3ZWIzYXV0aCtvcGVubG9naW4tYWRhcHRlckA4LjEyLjRfQGJhYmVsK3J1bnRpbWVANy4yOC40Xy9ub2RlX21vZHVsZXMvQHdlYjNhdXRoL25vLW1vZGFsL2Rpc3Qvbm9Nb2RhbC5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRTtBQUNHO0FBQ1A7QUFDb007QUFDcE07QUFDQTtBQUNwQjtBQUNSOztBQUVqQztBQUNBLDhCQUE4Qix1RUFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsSUFBSSw0RUFBZTtBQUNuQixJQUFJLDRFQUFlO0FBQ25CLElBQUksNEVBQWUsaUJBQWlCLDBEQUFjO0FBQ2xELElBQUksNEVBQWU7QUFDbkIsSUFBSSw0RUFBZSwyQkFBMkI7QUFDOUMsSUFBSSw0RUFBZTtBQUNuQixJQUFJLDRFQUFlLG9CQUFvQjtBQUN2QyxJQUFJLDRFQUFlO0FBQ25CLGlDQUFpQyxxRUFBeUI7QUFDMUQsK0JBQStCLCtDQUFHLGFBQWEsS0FBSywrQ0FBRztBQUN2RDtBQUNBLFlBQVkscUVBQXlCO0FBQ3JDO0FBQ0E7QUFDQSw2SkFBNkosNERBQWdCLDhKQUE4SixxRUFBeUI7QUFDcFc7QUFDQSx5QkFBeUIsZ0VBQWdCO0FBQ3pDLHVCQUF1QiwyRUFBYSxDQUFDLDJFQUFhLEdBQUcsY0FBYztBQUNuRSxtQkFBbUIsMkVBQWEsQ0FBQywyRUFBYSxHQUFHLEVBQUUsOERBQWMsdVJBQXVSO0FBQ3hWLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMERBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx1RUFBa0I7QUFDdEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRCQUE0QixrRUFBa0I7QUFDOUMsTUFBTTtBQUNOLE1BQU0sK0NBQUc7QUFDVCxZQUFZLHFFQUF5QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxxRUFBeUI7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsMEJBQTBCLDJEQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixvQ0FBb0MsbURBQUssQ0FBQyx1REFBUztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVFQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUVBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxnQkFBZ0IscUVBQXlCO0FBQ3pDO0FBQ0EsUUFBUSx5QkFBeUIsMkRBQWU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxnQkFBZ0IscUVBQXlCO0FBQ3pDO0FBQ0EsMkNBQTJDLHFFQUF5QjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsT0FBTyxhQUFhLCtDQUFHO0FBQ3ZCLEtBQUs7QUFDTDtBQUNBLHdCQUF3QiwwREFBYztBQUN0QyxvQkFBb0IsMERBQWM7QUFDbEMsZ0JBQWdCLDBEQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQscUVBQXlCO0FBQzVFO0FBQ0Esb0NBQW9DLHFFQUF5Qiw2Q0FBNkMsY0FBYztBQUN4SCxxQ0FBcUMsOERBQWtCLHNGQUFzRixxRUFBeUIsOERBQThELDBCQUEwQix1REFBdUQsbUNBQW1DO0FBQ3hWLHFDQUFxQyw4REFBa0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdFQUFnQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwREFBYztBQUN0QztBQUNBO0FBQ0E7QUFDQSxVQUFVLHFFQUF5QjtBQUNuQztBQUNBO0FBQ0Esd0JBQXdCLDBEQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUVBQXlCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUscUVBQXlCLDJDQUEyQyxZQUFZO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx3QkFBd0IsMERBQWMsZ0RBQWdELDREQUFnQjtBQUN0RztBQUNBO0FBQ0E7QUFDQSxJQUFJLCtDQUFHO0FBQ1Asd0JBQXdCLDBEQUFjLGdEQUFnRCw0REFBZ0I7QUFDdEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFjLGdEQUFnRCw0REFBZ0I7QUFDdEcsc0NBQXNDLDJEQUFlLGtCQUFrQiw0REFBZ0I7QUFDdkY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFjLGdEQUFnRCw0REFBZ0I7QUFDdEc7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHFFQUF5QixpQ0FBaUMsYUFBYTtBQUNoSCxtQ0FBbUMsNkRBQWlCLDZGQUE2RixxRUFBeUIsc0RBQXNELHdCQUF3QixpRUFBaUUsNENBQTRDO0FBQ3JXO0FBQ0Esd0JBQXdCLDBEQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwwREFBYztBQUNuQywwQ0FBMEMscUVBQXlCO0FBQ25FO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxvQkFBb0IsMERBQWM7QUFDbEM7QUFDQTtBQUNBLE1BQU0sK0NBQUc7QUFDVDtBQUNBLGdCQUFnQiwwREFBYyxZQUFZLDJFQUFhLEdBQUc7QUFDMUQsS0FBSztBQUNMLHFCQUFxQiwwREFBYztBQUNuQztBQUNBLG9CQUFvQiwwREFBYztBQUNsQyxVQUFVLGdFQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwrQ0FBRztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQ0FBRztBQUNiLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxnQkFBZ0IsMERBQWM7QUFDOUIsS0FBSztBQUNMLHFCQUFxQiwwREFBYztBQUNuQyxvQkFBb0IsMERBQWM7QUFDbEMsZ0JBQWdCLDBEQUFjO0FBQzlCLE1BQU0sK0NBQUc7QUFDVCxLQUFLO0FBQ0wscUJBQXFCLDBEQUFjO0FBQ25DLG9CQUFvQiwwREFBYztBQUNsQztBQUNBLGdCQUFnQiwwREFBYztBQUM5QixNQUFNLCtDQUFHO0FBQ1QsS0FBSztBQUNMLHFCQUFxQiwwREFBYztBQUNuQyxNQUFNLCtDQUFHO0FBQ1QsZ0JBQWdCLDBEQUFjO0FBQzlCLEtBQUs7QUFDTCxxQkFBcUIsMERBQWM7QUFDbkMsTUFBTSwrQ0FBRztBQUNULFVBQVUsZ0VBQWdCO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHdCQUF3QiwwREFBYyxtQkFBbUIscUVBQXlCO0FBQ2xGLHdCQUF3QiwwREFBYyxrQkFBa0IscUVBQXlCO0FBQ2pGLHdCQUF3QiwwREFBYyxjQUFjLHFFQUF5QjtBQUM3RTtBQUNBO0FBQ0EsU0FBUyxnRUFBZ0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHlEQUFhO0FBQzNDO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBRztBQUNYO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRTJCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNvbGxlY3RpYmxlL3dlYi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHdlYjNhdXRoK25vLW1vZGFsQDguMTIuNF9AYmFiZWwrcnVudGltZUA3LjI4LjRfQHdlYjNhdXRoK29wZW5sb2dpbi1hZGFwdGVyQDguMTIuNF9AYmFiZWwrcnVudGltZUA3LjI4LjRfL25vZGVfbW9kdWxlcy9Ad2ViM2F1dGgvbm8tbW9kYWwvZGlzdC9ub01vZGFsLmVzbS5qcz9lZjg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0U3ByZWFkMic7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknO1xuaW1wb3J0IHsgU2FmZUV2ZW50RW1pdHRlciB9IGZyb20gJ0B0b3J1c2xhYnMvb3BlbmxvZ2luLWpycGMnO1xuaW1wb3J0IHsgQURBUFRFUl9TVEFUVVMsIFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IsIGxvZywgQ0hBSU5fTkFNRVNQQUNFUywgc3RvcmFnZUF2YWlsYWJsZSwgZ2V0Q2hhaW5Db25maWcsIGZldGNoUHJvamVjdENvbmZpZywgV0FMTEVUX0FEQVBURVJTLCBBREFQVEVSX0VWRU5UUywgQURBUFRFUl9OQU1FU1BBQ0VTLCBXYWxsZXRMb2dpbkVycm9yLCBQTFVHSU5fTkFNRVNQQUNFUywgUExVR0lOX1NUQVRVUyB9IGZyb20gJ0B3ZWIzYXV0aC9iYXNlJztcbmltcG9ydCB7IENvbW1vbkpSUENQcm92aWRlciB9IGZyb20gJ0B3ZWIzYXV0aC9iYXNlLXByb3ZpZGVyJztcbmltcG9ydCB7IExPR0lOX1BST1ZJREVSIH0gZnJvbSAnQHdlYjNhdXRoL29wZW5sb2dpbi1hZGFwdGVyJztcbmltcG9ydCBjbG9uZWRlZXAgZnJvbSAnbG9kYXNoLmNsb25lZGVlcCc7XG5pbXBvcnQgbWVyZ2UgZnJvbSAnbG9kYXNoLm1lcmdlJztcblxuY29uc3QgQURBUFRFUl9DQUNIRV9LRVkgPSBcIldlYjNBdXRoLWNhY2hlZEFkYXB0ZXJcIjtcbmNsYXNzIFdlYjNBdXRoTm9Nb2RhbCBleHRlbmRzIFNhZmVFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdmFyIF9vcHRpb25zJGNoYWluQ29uZmlnLCBfb3B0aW9ucyRjaGFpbkNvbmZpZzIsIF9vcHRpb25zJGNoYWluQ29uZmlnMywgX29wdGlvbnMkY2hhaW5Db25maWc0O1xuICAgIHN1cGVyKCk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY29yZU9wdGlvbnNcIiwgdm9pZCAwKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25uZWN0ZWRBZGFwdGVyTmFtZVwiLCBudWxsKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGF0dXNcIiwgQURBUFRFUl9TVEFUVVMuTk9UX1JFQURZKTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWNoZWRBZGFwdGVyXCIsIG51bGwpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGxldEFkYXB0ZXJzXCIsIHt9KTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb21tb25KUlBDUHJvdmlkZXJcIiwgbnVsbCk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicGx1Z2luc1wiLCB7fSk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcmFnZVwiLCBcImxvY2FsU3RvcmFnZVwiKTtcbiAgICBpZiAoIW9wdGlvbnMuY2xpZW50SWQpIHRocm93IFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IuaW52YWxpZFBhcmFtcyhcIlBsZWFzZSBwcm92aWRlIGEgdmFsaWQgY2xpZW50SWQgaW4gY29uc3RydWN0b3JcIik7XG4gICAgaWYgKG9wdGlvbnMuZW5hYmxlTG9nZ2luZykgbG9nLmVuYWJsZUFsbCgpO2Vsc2UgbG9nLnNldExldmVsKFwiZXJyb3JcIik7XG4gICAgaWYgKCFvcHRpb25zLnByaXZhdGVLZXlQcm92aWRlciAmJiAhb3B0aW9ucy5jaGFpbkNvbmZpZykge1xuICAgICAgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5pbnZhbGlkUGFyYW1zKFwiUGxlYXNlIHByb3ZpZGUgY2hhaW5Db25maWcgb3IgcHJpdmF0ZUtleVByb3ZpZGVyXCIpO1xuICAgIH1cbiAgICBvcHRpb25zLmNoYWluQ29uZmlnID0gb3B0aW9ucy5jaGFpbkNvbmZpZyB8fCBvcHRpb25zLnByaXZhdGVLZXlQcm92aWRlci5jdXJyZW50Q2hhaW5Db25maWc7XG4gICAgaWYgKCEoKF9vcHRpb25zJGNoYWluQ29uZmlnID0gb3B0aW9ucy5jaGFpbkNvbmZpZykgIT09IG51bGwgJiYgX29wdGlvbnMkY2hhaW5Db25maWcgIT09IHZvaWQgMCAmJiBfb3B0aW9ucyRjaGFpbkNvbmZpZy5jaGFpbk5hbWVzcGFjZSkgfHwgIU9iamVjdC52YWx1ZXMoQ0hBSU5fTkFNRVNQQUNFUykuaW5jbHVkZXMoKF9vcHRpb25zJGNoYWluQ29uZmlnMiA9IG9wdGlvbnMuY2hhaW5Db25maWcpID09PSBudWxsIHx8IF9vcHRpb25zJGNoYWluQ29uZmlnMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkY2hhaW5Db25maWcyLmNoYWluTmFtZXNwYWNlKSkgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5pbnZhbGlkUGFyYW1zKFwiUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBjaGFpbk5hbWVzcGFjZSBpbiBjaGFpbkNvbmZpZ1wiKTtcbiAgICBpZiAob3B0aW9ucy5zdG9yYWdlS2V5ID09PSBcInNlc3Npb25cIikgdGhpcy5zdG9yYWdlID0gXCJzZXNzaW9uU3RvcmFnZVwiO1xuICAgIHRoaXMuY2FjaGVkQWRhcHRlciA9IHN0b3JhZ2VBdmFpbGFibGUodGhpcy5zdG9yYWdlKSA/IHdpbmRvd1t0aGlzLnN0b3JhZ2VdLmdldEl0ZW0oQURBUFRFUl9DQUNIRV9LRVkpIDogbnVsbDtcbiAgICB0aGlzLmNvcmVPcHRpb25zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zKSwge30sIHtcbiAgICAgIGNoYWluQ29uZmlnOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGdldENoYWluQ29uZmlnKChfb3B0aW9ucyRjaGFpbkNvbmZpZzMgPSBvcHRpb25zLmNoYWluQ29uZmlnKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRjaGFpbkNvbmZpZzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGNoYWluQ29uZmlnMy5jaGFpbk5hbWVzcGFjZSwgKF9vcHRpb25zJGNoYWluQ29uZmlnNCA9IG9wdGlvbnMuY2hhaW5Db25maWcpID09PSBudWxsIHx8IF9vcHRpb25zJGNoYWluQ29uZmlnNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkY2hhaW5Db25maWc0LmNoYWluSWQpIHx8IHt9KSwgb3B0aW9ucy5jaGFpbkNvbmZpZylcbiAgICB9KTtcbiAgICB0aGlzLnN1YnNjcmliZVRvQWRhcHRlckV2ZW50cyA9IHRoaXMuc3Vic2NyaWJlVG9BZGFwdGVyRXZlbnRzLmJpbmQodGhpcyk7XG4gIH1cbiAgZ2V0IGNvbm5lY3RlZCgpIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLmNvbm5lY3RlZEFkYXB0ZXJOYW1lKTtcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgaWYgKHRoaXMuc3RhdHVzICE9PSBBREFQVEVSX1NUQVRVUy5OT1RfUkVBRFkgJiYgdGhpcy5jb21tb25KUlBDUHJvdmlkZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbW1vbkpSUENQcm92aWRlcjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgc2V0IHByb3ZpZGVyKF8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICB0aGlzLmNvbW1vbkpSUENQcm92aWRlciA9IGF3YWl0IENvbW1vbkpSUENQcm92aWRlci5nZXRQcm92aWRlckluc3RhbmNlKHtcbiAgICAgIGNoYWluQ29uZmlnOiB0aGlzLmNvcmVPcHRpb25zLmNoYWluQ29uZmlnXG4gICAgfSk7XG4gICAgbGV0IHByb2plY3RDb25maWc7XG4gICAgdHJ5IHtcbiAgICAgIHByb2plY3RDb25maWcgPSBhd2FpdCBmZXRjaFByb2plY3RDb25maWcodGhpcy5jb3JlT3B0aW9ucy5jbGllbnRJZCwgdGhpcy5jb3JlT3B0aW9ucy53ZWIzQXV0aE5ldHdvcmspO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZy5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCBwcm9qZWN0IGNvbmZpZ3VyYXRpb25zXCIsIGUpO1xuICAgICAgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShcImZhaWxlZCB0byBmZXRjaCBwcm9qZWN0IGNvbmZpZ3VyYXRpb25zXCIsIGUpO1xuICAgIH1cbiAgICBjb25zdCBpbml0UHJvbWlzZXMgPSBPYmplY3Qua2V5cyh0aGlzLndhbGxldEFkYXB0ZXJzKS5tYXAoYXN5bmMgYWRhcHRlck5hbWUgPT4ge1xuICAgICAgdGhpcy5zdWJzY3JpYmVUb0FkYXB0ZXJFdmVudHModGhpcy53YWxsZXRBZGFwdGVyc1thZGFwdGVyTmFtZV0pO1xuICAgICAgLy8gaWYgYWRhcHRlciBkb2Vzbid0IGhhdmUgYW55IGNoYWluIGNvbmZpZyB5ZXQgdGhlbiBzZXQgaXQgYmFzZWQgb24gcHJvdmlkZWQgbmFtZXNwYWNlIGFuZCBjaGFpbklkLlxuICAgICAgLy8gaWYgbm8gY2hhaW5OYW1lc3BhY2Ugb3IgY2hhaW5JZCBpcyBiZWluZyBwcm92aWRlZCwgaXQgd2lsbCBjb25uZWN0IHdpdGggbWFpbm5ldC5cbiAgICAgIGlmICghdGhpcy53YWxsZXRBZGFwdGVyc1thZGFwdGVyTmFtZV0uY2hhaW5Db25maWdQcm94eSkge1xuICAgICAgICBjb25zdCBwcm92aWRlZENoYWluQ29uZmlnID0gdGhpcy5jb3JlT3B0aW9ucy5jaGFpbkNvbmZpZztcbiAgICAgICAgaWYgKCFwcm92aWRlZENoYWluQ29uZmlnLmNoYWluTmFtZXNwYWNlKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmludmFsaWRQYXJhbXMoXCJQbGVhc2UgcHJvdmlkZSBjaGFpbk5hbWVzcGFjZSBpbiBjaGFpbkNvbmZpZ1wiKTtcbiAgICAgICAgdGhpcy53YWxsZXRBZGFwdGVyc1thZGFwdGVyTmFtZV0uc2V0QWRhcHRlclNldHRpbmdzKHtcbiAgICAgICAgICBjaGFpbkNvbmZpZzogcHJvdmlkZWRDaGFpbkNvbmZpZyxcbiAgICAgICAgICBzZXNzaW9uVGltZTogdGhpcy5jb3JlT3B0aW9ucy5zZXNzaW9uVGltZSxcbiAgICAgICAgICBjbGllbnRJZDogdGhpcy5jb3JlT3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICB3ZWIzQXV0aE5ldHdvcms6IHRoaXMuY29yZU9wdGlvbnMud2ViM0F1dGhOZXR3b3JrLFxuICAgICAgICAgIHVzZUNvcmVLaXRLZXk6IHRoaXMuY29yZU9wdGlvbnMudXNlQ29yZUtpdEtleVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud2FsbGV0QWRhcHRlcnNbYWRhcHRlck5hbWVdLnNldEFkYXB0ZXJTZXR0aW5ncyh7XG4gICAgICAgICAgc2Vzc2lvblRpbWU6IHRoaXMuY29yZU9wdGlvbnMuc2Vzc2lvblRpbWUsXG4gICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY29yZU9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgd2ViM0F1dGhOZXR3b3JrOiB0aGlzLmNvcmVPcHRpb25zLndlYjNBdXRoTmV0d29yayxcbiAgICAgICAgICB1c2VDb3JlS2l0S2V5OiB0aGlzLmNvcmVPcHRpb25zLnVzZUNvcmVLaXRLZXlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYWRhcHRlck5hbWUgPT09IFdBTExFVF9BREFQVEVSUy5PUEVOTE9HSU4pIHtcbiAgICAgICAgY29uc3Qgb3BlbmxvZ2luQWRhcHRlciA9IHRoaXMud2FsbGV0QWRhcHRlcnNbYWRhcHRlck5hbWVdO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgd2hpdGVsYWJlbFxuICAgICAgICB9ID0gcHJvamVjdENvbmZpZztcbiAgICAgICAgdGhpcy5jb3JlT3B0aW9ucy51aUNvbmZpZyA9IG1lcmdlKGNsb25lZGVlcCh3aGl0ZWxhYmVsKSwgdGhpcy5jb3JlT3B0aW9ucy51aUNvbmZpZyk7XG4gICAgICAgIGlmICghdGhpcy5jb3JlT3B0aW9ucy51aUNvbmZpZy5tb2RlKSB0aGlzLmNvcmVPcHRpb25zLnVpQ29uZmlnLm1vZGUgPSBcImxpZ2h0XCI7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBzbXNfb3RwX2VuYWJsZWQ6IHNtc090cEVuYWJsZWQsXG4gICAgICAgICAgd2hpdGVsaXN0XG4gICAgICAgIH0gPSBwcm9qZWN0Q29uZmlnO1xuICAgICAgICBpZiAoc21zT3RwRW5hYmxlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgb3BlbmxvZ2luQWRhcHRlci5zZXRBZGFwdGVyU2V0dGluZ3Moe1xuICAgICAgICAgICAgbG9naW5Db25maWc6IHtcbiAgICAgICAgICAgICAgW0xPR0lOX1BST1ZJREVSLlNNU19QQVNTV09SRExFU1NdOiB7XG4gICAgICAgICAgICAgICAgc2hvd09uTW9kYWw6IHNtc090cEVuYWJsZWQsXG4gICAgICAgICAgICAgICAgc2hvd09uRGVza3RvcDogc21zT3RwRW5hYmxlZCxcbiAgICAgICAgICAgICAgICBzaG93T25Nb2JpbGU6IHNtc090cEVuYWJsZWQsXG4gICAgICAgICAgICAgICAgc2hvd09uU29jaWFsQmFja3VwRmFjdG9yOiBzbXNPdHBFbmFibGVkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2hpdGVsaXN0KSB7XG4gICAgICAgICAgb3BlbmxvZ2luQWRhcHRlci5zZXRBZGFwdGVyU2V0dGluZ3Moe1xuICAgICAgICAgICAgb3JpZ2luRGF0YTogd2hpdGVsaXN0LnNpZ25lZF91cmxzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29yZU9wdGlvbnMucHJpdmF0ZUtleVByb3ZpZGVyKSB7XG4gICAgICAgICAgaWYgKG9wZW5sb2dpbkFkYXB0ZXIuY3VycmVudENoYWluTmFtZXNwYWNlICE9PSB0aGlzLmNvcmVPcHRpb25zLnByaXZhdGVLZXlQcm92aWRlci5jdXJyZW50Q2hhaW5Db25maWcuY2hhaW5OYW1lc3BhY2UpIHtcbiAgICAgICAgICAgIHRocm93IFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IuaW5jb21wYXRpYmxlQ2hhaW5OYW1lU3BhY2UoXCJwcml2YXRlIGtleSBwcm92aWRlciBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHByb3ZpZGVkIGNoYWluTmFtZXNwYWNlIGZvciBvcGVubG9naW4gYWRhcHRlclwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3BlbmxvZ2luQWRhcHRlci5zZXRBZGFwdGVyU2V0dGluZ3Moe1xuICAgICAgICAgICAgcHJpdmF0ZUtleVByb3ZpZGVyOiB0aGlzLmNvcmVPcHRpb25zLnByaXZhdGVLZXlQcm92aWRlclxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG9wZW5sb2dpbkFkYXB0ZXIuc2V0QWRhcHRlclNldHRpbmdzKHtcbiAgICAgICAgICB3aGl0ZUxhYmVsOiB0aGlzLmNvcmVPcHRpb25zLnVpQ29uZmlnXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIW9wZW5sb2dpbkFkYXB0ZXIucHJpdmF0ZUtleVByb3ZpZGVyKSB7XG4gICAgICAgICAgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5pbnZhbGlkUGFyYW1zKFwicHJpdmF0ZUtleVByb3ZpZGVyIGlzIHJlcXVpcmVkIGZvciBvcGVubG9naW4gYWRhcHRlclwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhZGFwdGVyTmFtZSA9PT0gV0FMTEVUX0FEQVBURVJTLldBTExFVF9DT05ORUNUX1YyKSB7XG4gICAgICAgIGNvbnN0IHdhbGxldENvbm5lY3RBZGFwdGVyID0gdGhpcy53YWxsZXRBZGFwdGVyc1thZGFwdGVyTmFtZV07XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICB3YWxsZXRfY29ubmVjdF9lbmFibGVkOiB3YWxsZXRDb25uZWN0RW5hYmxlZCxcbiAgICAgICAgICB3YWxsZXRfY29ubmVjdF9wcm9qZWN0X2lkOiB3YWxsZXRDb25uZWN0UHJvamVjdElkXG4gICAgICAgIH0gPSBwcm9qZWN0Q29uZmlnO1xuICAgICAgICBpZiAod2FsbGV0Q29ubmVjdEVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5pbnZhbGlkUGFyYW1zKFwiUGxlYXNlIGVuYWJsZSB3YWxsZXQgY29ubmVjdCB2MiBhZGRvbiBvbiBkYXNoYm9hcmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3YWxsZXRDb25uZWN0UHJvamVjdElkKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmludmFsaWRQYXJhbXMoXCJJbnZhbGlkIHdhbGxldCBjb25uZWN0IHByb2plY3QgaWQuIFBsZWFzZSBjb25maWd1cmUgaXQgb24gdGhlIGRhc2hib2FyZFwiKTtcbiAgICAgICAgd2FsbGV0Q29ubmVjdEFkYXB0ZXIuc2V0QWRhcHRlclNldHRpbmdzKHtcbiAgICAgICAgICBhZGFwdGVyU2V0dGluZ3M6IHtcbiAgICAgICAgICAgIHdhbGxldENvbm5lY3RJbml0T3B0aW9uczoge1xuICAgICAgICAgICAgICBwcm9qZWN0SWQ6IHdhbGxldENvbm5lY3RQcm9qZWN0SWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMud2FsbGV0QWRhcHRlcnNbYWRhcHRlck5hbWVdLmluaXQoe1xuICAgICAgICBhdXRvQ29ubmVjdDogdGhpcy5jYWNoZWRBZGFwdGVyID09PSBhZGFwdGVyTmFtZVxuICAgICAgfSkuY2F0Y2goZSA9PiBsb2cuZXJyb3IoZSwgYWRhcHRlck5hbWUpKTtcbiAgICB9KTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChpbml0UHJvbWlzZXMpO1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQURBUFRFUl9TVEFUVVMuTk9UX1JFQURZKSB7XG4gICAgICB0aGlzLnN0YXR1cyA9IEFEQVBURVJfU1RBVFVTLlJFQURZO1xuICAgICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLlJFQURZKTtcbiAgICB9XG4gIH1cbiAgZ2V0QWRhcHRlcihhZGFwdGVyTmFtZSkge1xuICAgIHJldHVybiB0aGlzLndhbGxldEFkYXB0ZXJzW2FkYXB0ZXJOYW1lXSB8fCBudWxsO1xuICB9XG4gIGNvbmZpZ3VyZUFkYXB0ZXIoYWRhcHRlcikge1xuICAgIHRoaXMuY2hlY2tJbml0UmVxdWlyZW1lbnRzKCk7XG4gICAgY29uc3QgcHJvdmlkZWRDaGFpbkNvbmZpZyA9IHRoaXMuY29yZU9wdGlvbnMuY2hhaW5Db25maWc7XG4gICAgaWYgKCFwcm92aWRlZENoYWluQ29uZmlnLmNoYWluTmFtZXNwYWNlKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmludmFsaWRQYXJhbXMoXCJQbGVhc2UgcHJvdmlkZSBjaGFpbk5hbWVzcGFjZSBpbiBjaGFpbkNvbmZpZ1wiKTtcbiAgICBjb25zdCBhZGFwdGVyQWxyZWFkeUV4aXN0cyA9IHRoaXMud2FsbGV0QWRhcHRlcnNbYWRhcHRlci5uYW1lXTtcbiAgICBpZiAoYWRhcHRlckFscmVhZHlFeGlzdHMpIHRocm93IFdhbGxldEluaXRpYWxpemF0aW9uRXJyb3IuZHVwbGljYXRlQWRhcHRlckVycm9yKGBXYWxsZXQgYWRhcHRlciBmb3IgJHthZGFwdGVyLm5hbWV9IGFscmVhZHkgZXhpc3RzYCk7XG4gICAgaWYgKGFkYXB0ZXIuYWRhcHRlck5hbWVzcGFjZSAhPT0gQURBUFRFUl9OQU1FU1BBQ0VTLk1VTFRJQ0hBSU4gJiYgYWRhcHRlci5hZGFwdGVyTmFtZXNwYWNlICE9PSBwcm92aWRlZENoYWluQ29uZmlnLmNoYWluTmFtZXNwYWNlKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLmluY29tcGF0aWJsZUNoYWluTmFtZVNwYWNlKGBUaGlzIHdhbGxldCBhZGFwdGVyIGJlbG9uZ3MgdG8gJHthZGFwdGVyLmFkYXB0ZXJOYW1lc3BhY2V9IHdoaWNoIGlzIGluY29tcGF0aWJsZSB3aXRoIGN1cnJlbnRseSB1c2VkIG5hbWVzcGFjZTogJHtwcm92aWRlZENoYWluQ29uZmlnLmNoYWluTmFtZXNwYWNlfWApO1xuICAgIGlmIChhZGFwdGVyLmFkYXB0ZXJOYW1lc3BhY2UgPT09IEFEQVBURVJfTkFNRVNQQUNFUy5NVUxUSUNIQUlOICYmIGFkYXB0ZXIuY3VycmVudENoYWluTmFtZXNwYWNlICYmIHByb3ZpZGVkQ2hhaW5Db25maWcuY2hhaW5OYW1lc3BhY2UgIT09IGFkYXB0ZXIuY3VycmVudENoYWluTmFtZXNwYWNlKSB7XG4gICAgICAvLyBjaGFpbkNvbmZpZyBjaGVja3MgYXJlIGFscmVhZHkgdmFsaWRhdGVkIGluIGNvbnN0cnVjdG9yIHNvIHVzaW5nIHR5cGVjYXN0IGlzIHNhZmUgaGVyZS5cbiAgICAgIGFkYXB0ZXIuc2V0QWRhcHRlclNldHRpbmdzKHtcbiAgICAgICAgY2hhaW5Db25maWc6IHByb3ZpZGVkQ2hhaW5Db25maWdcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLndhbGxldEFkYXB0ZXJzW2FkYXB0ZXIubmFtZV0gPSBhZGFwdGVyO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGNsZWFyQ2FjaGUoKSB7XG4gICAgaWYgKCFzdG9yYWdlQXZhaWxhYmxlKHRoaXMuc3RvcmFnZSkpIHJldHVybjtcbiAgICB3aW5kb3dbdGhpcy5zdG9yYWdlXS5yZW1vdmVJdGVtKEFEQVBURVJfQ0FDSEVfS0VZKTtcbiAgICB0aGlzLmNhY2hlZEFkYXB0ZXIgPSBudWxsO1xuICB9XG4gIGFzeW5jIGFkZENoYWluKGNoYWluQ29uZmlnKSB7XG4gICAgaWYgKHRoaXMuc3RhdHVzID09PSBBREFQVEVSX1NUQVRVUy5DT05ORUNURUQgJiYgdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZSkgcmV0dXJuIHRoaXMud2FsbGV0QWRhcHRlcnNbdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZV0uYWRkQ2hhaW4oY2hhaW5Db25maWcpO1xuICAgIGlmICh0aGlzLmNvbW1vbkpSUENQcm92aWRlcikge1xuICAgICAgcmV0dXJuIHRoaXMuY29tbW9uSlJQQ1Byb3ZpZGVyLmFkZENoYWluKGNoYWluQ29uZmlnKTtcbiAgICB9XG4gICAgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShgTm8gd2FsbGV0IGlzIHJlYWR5YCk7XG4gIH1cbiAgYXN5bmMgc3dpdGNoQ2hhaW4ocGFyYW1zKSB7XG4gICAgaWYgKHRoaXMuc3RhdHVzID09PSBBREFQVEVSX1NUQVRVUy5DT05ORUNURUQgJiYgdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZSkgcmV0dXJuIHRoaXMud2FsbGV0QWRhcHRlcnNbdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZV0uc3dpdGNoQ2hhaW4ocGFyYW1zKTtcbiAgICBpZiAodGhpcy5jb21tb25KUlBDUHJvdmlkZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbW1vbkpSUENQcm92aWRlci5zd2l0Y2hDaGFpbihwYXJhbXMpO1xuICAgIH1cbiAgICB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLm5vdFJlYWR5KGBObyB3YWxsZXQgaXMgcmVhZHlgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25uZWN0IHRvIGEgc3BlY2lmaWMgd2FsbGV0IGFkYXB0ZXJcbiAgICogQHBhcmFtIHdhbGxldE5hbWUgLSBLZXkgb2YgdGhlIHdhbGxldEFkYXB0ZXIgdG8gdXNlLlxuICAgKi9cbiAgYXN5bmMgY29ubmVjdFRvKHdhbGxldE5hbWUsIGxvZ2luUGFyYW1zKSB7XG4gICAgaWYgKCF0aGlzLndhbGxldEFkYXB0ZXJzW3dhbGxldE5hbWVdIHx8ICF0aGlzLmNvbW1vbkpSUENQcm92aWRlcikgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RGb3VuZChgUGxlYXNlIGFkZCB3YWxsZXQgYWRhcHRlciBmb3IgJHt3YWxsZXROYW1lfSB3YWxsZXQsIGJlZm9yZSBjb25uZWN0aW5nYCk7XG4gICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCB0aGlzLndhbGxldEFkYXB0ZXJzW3dhbGxldE5hbWVdLmNvbm5lY3QobG9naW5QYXJhbXMpO1xuICAgIHRoaXMuY29tbW9uSlJQQ1Byb3ZpZGVyLnVwZGF0ZVByb3ZpZGVyRW5naW5lUHJveHkocHJvdmlkZXIucHJvdmlkZXIgfHwgcHJvdmlkZXIpO1xuICAgIHJldHVybiB0aGlzLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGxvZ291dChvcHRpb25zID0ge1xuICAgIGNsZWFudXA6IGZhbHNlXG4gIH0pIHtcbiAgICBpZiAodGhpcy5zdGF0dXMgIT09IEFEQVBURVJfU1RBVFVTLkNPTk5FQ1RFRCB8fCAhdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZSkgdGhyb3cgV2FsbGV0TG9naW5FcnJvci5ub3RDb25uZWN0ZWRFcnJvcihgTm8gd2FsbGV0IGlzIGNvbm5lY3RlZGApO1xuICAgIGF3YWl0IHRoaXMud2FsbGV0QWRhcHRlcnNbdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZV0uZGlzY29ubmVjdChvcHRpb25zKTtcbiAgfVxuICBhc3luYyBnZXRVc2VySW5mbygpIHtcbiAgICBsb2cuZGVidWcoXCJHZXR0aW5nIHVzZXIgaW5mb1wiLCB0aGlzLnN0YXR1cywgdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZSk7XG4gICAgaWYgKHRoaXMuc3RhdHVzICE9PSBBREFQVEVSX1NUQVRVUy5DT05ORUNURUQgfHwgIXRoaXMuY29ubmVjdGVkQWRhcHRlck5hbWUpIHRocm93IFdhbGxldExvZ2luRXJyb3Iubm90Q29ubmVjdGVkRXJyb3IoYE5vIHdhbGxldCBpcyBjb25uZWN0ZWRgKTtcbiAgICByZXR1cm4gdGhpcy53YWxsZXRBZGFwdGVyc1t0aGlzLmNvbm5lY3RlZEFkYXB0ZXJOYW1lXS5nZXRVc2VySW5mbygpO1xuICB9XG4gIGFzeW5jIGVuYWJsZU1GQShsb2dpblBhcmFtcykge1xuICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVEVEIHx8ICF0aGlzLmNvbm5lY3RlZEFkYXB0ZXJOYW1lKSB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLm5vdENvbm5lY3RlZEVycm9yKGBObyB3YWxsZXQgaXMgY29ubmVjdGVkYCk7XG4gICAgaWYgKHRoaXMuY29ubmVjdGVkQWRhcHRlck5hbWUgIT09IFdBTExFVF9BREFQVEVSUy5PUEVOTE9HSU4pIHRocm93IFdhbGxldExvZ2luRXJyb3IudW5zdXBwb3J0ZWRPcGVyYXRpb24oYEVuYWJsZU1GQSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFkYXB0ZXIuYCk7XG4gICAgcmV0dXJuIHRoaXMud2FsbGV0QWRhcHRlcnNbdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZV0uZW5hYmxlTUZBKGxvZ2luUGFyYW1zKTtcbiAgfVxuICBhc3luYyBhdXRoZW50aWNhdGVVc2VyKCkge1xuICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVEVEIHx8ICF0aGlzLmNvbm5lY3RlZEFkYXB0ZXJOYW1lKSB0aHJvdyBXYWxsZXRMb2dpbkVycm9yLm5vdENvbm5lY3RlZEVycm9yKGBObyB3YWxsZXQgaXMgY29ubmVjdGVkYCk7XG4gICAgcmV0dXJuIHRoaXMud2FsbGV0QWRhcHRlcnNbdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZV0uYXV0aGVudGljYXRlVXNlcigpO1xuICB9XG4gIGFkZFBsdWdpbihwbHVnaW4pIHtcbiAgICBpZiAodGhpcy5wbHVnaW5zW3BsdWdpbi5uYW1lXSkgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5kdXBsaWNhdGVBZGFwdGVyRXJyb3IoYFBsdWdpbiAke3BsdWdpbi5uYW1lfSBhbHJlYWR5IGV4aXN0YCk7XG4gICAgaWYgKHBsdWdpbi5wbHVnaW5OYW1lc3BhY2UgIT09IFBMVUdJTl9OQU1FU1BBQ0VTLk1VTFRJQ0hBSU4gJiYgcGx1Z2luLnBsdWdpbk5hbWVzcGFjZSAhPT0gdGhpcy5jb3JlT3B0aW9ucy5jaGFpbkNvbmZpZy5jaGFpbk5hbWVzcGFjZSkgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5pbmNvbXBhdGlibGVDaGFpbk5hbWVTcGFjZShgVGhpcyBwbHVnaW4gYmVsb25ncyB0byAke3BsdWdpbi5wbHVnaW5OYW1lc3BhY2V9IG5hbWVzcGFjZSB3aGljaCBpcyBpbmNvbXBhdGlibGUgd2l0aCBjdXJyZW50bHkgdXNlZCBuYW1lc3BhY2U6ICR7dGhpcy5jb3JlT3B0aW9ucy5jaGFpbkNvbmZpZy5jaGFpbk5hbWVzcGFjZX1gKTtcbiAgICB0aGlzLnBsdWdpbnNbcGx1Z2luLm5hbWVdID0gcGx1Z2luO1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVEVEICYmIHRoaXMuY29ubmVjdGVkQWRhcHRlck5hbWUpIHtcbiAgICAgIC8vIHdlYjNhdXRoIGlzIGFscmVhZHkgY29ubmVjdGVkLiBjYW4gaW5pdGlhbGl6ZSBwbHVnaW5zXG4gICAgICB0aGlzLmNvbm5lY3RUb1BsdWdpbnMoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLmNvbm5lY3RlZEFkYXB0ZXJOYW1lXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZ2V0UGx1Z2luKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5wbHVnaW5zW25hbWVdIHx8IG51bGw7XG4gIH1cbiAgc3Vic2NyaWJlVG9BZGFwdGVyRXZlbnRzKHdhbGxldEFkYXB0ZXIpIHtcbiAgICB3YWxsZXRBZGFwdGVyLm9uKEFEQVBURVJfRVZFTlRTLkNPTk5FQ1RFRCwgYXN5bmMgZGF0YSA9PiB7XG4gICAgICBpZiAoIXRoaXMuY29tbW9uSlJQQ1Byb3ZpZGVyKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLm5vdEZvdW5kKGBDb21tb25KcnBjUHJvdmlkZXIgbm90IGZvdW5kYCk7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHByb3ZpZGVyXG4gICAgICB9ID0gZGF0YTtcbiAgICAgIHRoaXMuY29tbW9uSlJQQ1Byb3ZpZGVyLnVwZGF0ZVByb3ZpZGVyRW5naW5lUHJveHkocHJvdmlkZXIucHJvdmlkZXIgfHwgcHJvdmlkZXIpO1xuICAgICAgdGhpcy5zdGF0dXMgPSBBREFQVEVSX1NUQVRVUy5DT05ORUNURUQ7XG4gICAgICB0aGlzLmNvbm5lY3RlZEFkYXB0ZXJOYW1lID0gZGF0YS5hZGFwdGVyO1xuICAgICAgdGhpcy5jYWNoZVdhbGxldChkYXRhLmFkYXB0ZXIpO1xuICAgICAgbG9nLmRlYnVnKFwiY29ubmVjdGVkXCIsIHRoaXMuc3RhdHVzLCB0aGlzLmNvbm5lY3RlZEFkYXB0ZXJOYW1lKTtcbiAgICAgIHRoaXMuY29ubmVjdFRvUGx1Z2lucyhkYXRhKTtcbiAgICAgIHRoaXMuZW1pdChBREFQVEVSX0VWRU5UUy5DT05ORUNURUQsIF9vYmplY3RTcHJlYWQoe30sIGRhdGEpKTtcbiAgICB9KTtcbiAgICB3YWxsZXRBZGFwdGVyLm9uKEFEQVBURVJfRVZFTlRTLkRJU0NPTk5FQ1RFRCwgYXN5bmMgZGF0YSA9PiB7XG4gICAgICAvLyBnZXQgYmFjayB0byByZWFkeSBzdGF0ZSBmb3IgcmVoeWRyYXRpbmcuXG4gICAgICB0aGlzLnN0YXR1cyA9IEFEQVBURVJfU1RBVFVTLlJFQURZO1xuICAgICAgaWYgKHN0b3JhZ2VBdmFpbGFibGUodGhpcy5zdG9yYWdlKSkge1xuICAgICAgICBjb25zdCBjYWNoZWRBZGFwdGVyID0gd2luZG93W3RoaXMuc3RvcmFnZV0uZ2V0SXRlbShBREFQVEVSX0NBQ0hFX0tFWSk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZEFkYXB0ZXJOYW1lID09PSBjYWNoZWRBZGFwdGVyKSB7XG4gICAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxvZy5kZWJ1ZyhcImRpc2Nvbm5lY3RlZFwiLCB0aGlzLnN0YXR1cywgdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZSk7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QudmFsdWVzKHRoaXMucGx1Z2lucykubWFwKHBsdWdpbiA9PiB7XG4gICAgICAgIHJldHVybiBwbHVnaW4uZGlzY29ubmVjdCgpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAvLyBzd2FsbG93IGVycm9yIGlmIGFkYXB0ZXIgZG9lc24ndCBzdXBwb3J0cyB0aGlzIHBsdWdpbi5cbiAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gNTIxMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB0aHJvdyBlcnJvcjtcbiAgICAgICAgICBsb2cuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH0pKTtcbiAgICAgIHRoaXMuY29ubmVjdGVkQWRhcHRlck5hbWUgPSBudWxsO1xuICAgICAgdGhpcy5lbWl0KEFEQVBURVJfRVZFTlRTLkRJU0NPTk5FQ1RFRCwgZGF0YSk7XG4gICAgfSk7XG4gICAgd2FsbGV0QWRhcHRlci5vbihBREFQVEVSX0VWRU5UUy5DT05ORUNUSU5HLCBkYXRhID0+IHtcbiAgICAgIHRoaXMuc3RhdHVzID0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVElORztcbiAgICAgIHRoaXMuZW1pdChBREFQVEVSX0VWRU5UUy5DT05ORUNUSU5HLCBkYXRhKTtcbiAgICAgIGxvZy5kZWJ1ZyhcImNvbm5lY3RpbmdcIiwgdGhpcy5zdGF0dXMsIHRoaXMuY29ubmVjdGVkQWRhcHRlck5hbWUpO1xuICAgIH0pO1xuICAgIHdhbGxldEFkYXB0ZXIub24oQURBUFRFUl9FVkVOVFMuRVJST1JFRCwgZGF0YSA9PiB7XG4gICAgICB0aGlzLnN0YXR1cyA9IEFEQVBURVJfU1RBVFVTLkVSUk9SRUQ7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcbiAgICAgIHRoaXMuZW1pdChBREFQVEVSX0VWRU5UUy5FUlJPUkVELCBkYXRhKTtcbiAgICAgIGxvZy5kZWJ1ZyhcImVycm9yZWRcIiwgdGhpcy5zdGF0dXMsIHRoaXMuY29ubmVjdGVkQWRhcHRlck5hbWUpO1xuICAgIH0pO1xuICAgIHdhbGxldEFkYXB0ZXIub24oQURBUFRFUl9FVkVOVFMuQURBUFRFUl9EQVRBX1VQREFURUQsIGRhdGEgPT4ge1xuICAgICAgbG9nLmRlYnVnKFwiYWRhcHRlciBkYXRhIHVwZGF0ZWRcIiwgZGF0YSk7XG4gICAgICB0aGlzLmVtaXQoQURBUFRFUl9FVkVOVFMuQURBUFRFUl9EQVRBX1VQREFURUQsIGRhdGEpO1xuICAgIH0pO1xuICAgIHdhbGxldEFkYXB0ZXIub24oQURBUFRFUl9FVkVOVFMuQ0FDSEVfQ0xFQVIsIGRhdGEgPT4ge1xuICAgICAgbG9nLmRlYnVnKFwiYWRhcHRlciBjYWNoZSBjbGVhclwiLCBkYXRhKTtcbiAgICAgIGlmIChzdG9yYWdlQXZhaWxhYmxlKHRoaXMuc3RvcmFnZSkpIHtcbiAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgY2hlY2tJbml0UmVxdWlyZW1lbnRzKCkge1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVElORykgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShcIkFscmVhZHkgcGVuZGluZyBjb25uZWN0aW9uXCIpO1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQURBUFRFUl9TVEFUVVMuQ09OTkVDVEVEKSB0aHJvdyBXYWxsZXRJbml0aWFsaXphdGlvbkVycm9yLm5vdFJlYWR5KFwiQWxyZWFkeSBjb25uZWN0ZWRcIik7XG4gICAgaWYgKHRoaXMuc3RhdHVzID09PSBBREFQVEVSX1NUQVRVUy5SRUFEWSkgdGhyb3cgV2FsbGV0SW5pdGlhbGl6YXRpb25FcnJvci5ub3RSZWFkeShcIkFkYXB0ZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZFwiKTtcbiAgfVxuICBjYWNoZVdhbGxldCh3YWxsZXROYW1lKSB7XG4gICAgaWYgKCFzdG9yYWdlQXZhaWxhYmxlKHRoaXMuc3RvcmFnZSkpIHJldHVybjtcbiAgICB3aW5kb3dbdGhpcy5zdG9yYWdlXS5zZXRJdGVtKEFEQVBURVJfQ0FDSEVfS0VZLCB3YWxsZXROYW1lKTtcbiAgICB0aGlzLmNhY2hlZEFkYXB0ZXIgPSB3YWxsZXROYW1lO1xuICB9XG4gIGNvbm5lY3RUb1BsdWdpbnMoZGF0YSkge1xuICAgIE9iamVjdC52YWx1ZXModGhpcy5wbHVnaW5zKS5tYXAoYXN5bmMgcGx1Z2luID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghcGx1Z2luLlNVUFBPUlRFRF9BREFQVEVSUy5pbmNsdWRlcyhkYXRhLmFkYXB0ZXIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwbHVnaW4uc3RhdHVzID09PSBQTFVHSU5fU1RBVFVTLkNPTk5FQ1RFRCkgcmV0dXJuO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgb3BlbmxvZ2luSW5zdGFuY2VcbiAgICAgICAgfSA9IHRoaXMud2FsbGV0QWRhcHRlcnNbdGhpcy5jb25uZWN0ZWRBZGFwdGVyTmFtZV07XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICBzZXNzaW9uTmFtZXNwYWNlXG4gICAgICAgIH0gPSBvcGVubG9naW5JbnN0YW5jZSB8fCB7fTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLmluaXRXaXRoV2ViM0F1dGgodGhpcywgb3B0aW9ucy53aGl0ZUxhYmVsKTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLmNvbm5lY3Qoe1xuICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICBzZXNzaW9uTmFtZXNwYWNlXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gc3dhbGxvdyBlcnJvciBpZiBjb25uZWN0b3IgYWRhcHRlciBkb2Vzbid0IHN1cHBvcnRzIHRoaXMgcGx1Z2luLlxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gNTIxMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsb2cuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCB7IFdlYjNBdXRoTm9Nb2RhbCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@web3auth+no-modal@8.12.4_@babel+runtime@7.28.4_@web3auth+openlogin-adapter@8.12.4_@babel+runtime@7.28.4_/node_modules/@web3auth/no-modal/dist/noModal.esm.js\n");

/***/ })

};
;