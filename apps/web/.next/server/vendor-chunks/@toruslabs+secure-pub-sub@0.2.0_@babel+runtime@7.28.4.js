"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@toruslabs+secure-pub-sub@0.2.0_@babel+runtime@7.28.4";
exports.ids = ["vendor-chunks/@toruslabs+secure-pub-sub@0.2.0_@babel+runtime@7.28.4"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@toruslabs+secure-pub-sub@0.2.0_@babel+runtime@7.28.4/node_modules/@toruslabs/secure-pub-sub/dist/securePubSub.esm.js":
/*!******************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@toruslabs+secure-pub-sub@0.2.0_@babel+runtime@7.28.4/node_modules/@toruslabs/secure-pub-sub/dist/securePubSub.esm.js ***!
  \******************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SecurePubSub: () => (/* binding */ SecurePubSub)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/../../node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @toruslabs/eccrypto */ \"(ssr)/../../node_modules/.pnpm/@toruslabs+eccrypto@4.0.0/node_modules/@toruslabs/eccrypto/dist/eccrypto.esm.js\");\n/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @toruslabs/http-helpers */ \"(ssr)/../../node_modules/.pnpm/@toruslabs+http-helpers@6.1.1_@babel+runtime@7.28.4/node_modules/@toruslabs/http-helpers/dist/httpHelpers.esm.js\");\n/* harmony import */ var _toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @toruslabs/metadata-helpers */ \"(ssr)/../../node_modules/.pnpm/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4/node_modules/@toruslabs/metadata-helpers/dist/metadataHelpers.esm.js\");\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! socket.io-client */ \"(ssr)/../../node_modules/.pnpm/socket.io-client@4.8.1/node_modules/socket.io-client/build/esm-debug/index.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! loglevel */ \"(ssr)/../../node_modules/.pnpm/loglevel@1.9.2/node_modules/loglevel/lib/loglevel.js\");\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\nvar log = loglevel__WEBPACK_IMPORTED_MODULE_5___default().getLogger(\"SecurePubSub\");\n\nclass SecurePubSub {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"options\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, \"SOCKET_CONN\", null);\n    this.options = options;\n    this.options.timeout = options.timeout || 600; // 10 mins is default timeout\n    this.options.serverUrl = options.serverUrl || \"https://session.web3auth.io\";\n    this.options.enableLogging = options.enableLogging || false;\n    this.options.namespace = options.namespace || \"\";\n    this.options.sameIpCheck = options.sameIpCheck || false;\n    this.options.sameOriginCheck = options.sameOriginCheck || false;\n    if (this.options.enableLogging) log.enableAll();else log.disableAll();\n  }\n  static setLogLevel(level) {\n    log.setLevel(level);\n    (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.setLogLevel)(level);\n  }\n  async publish(topic, message) {\n    const topicPrivKey = (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_3__.keccak256)(Buffer.from(topic, \"utf8\"));\n    const encryptedData = await (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_3__.encryptData)(topicPrivKey.toString(\"hex\"), message);\n    const signature = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_1__.sign)(topicPrivKey, (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_3__.keccak256)(Buffer.from(encryptedData, \"utf8\")));\n    const fetchBody = {\n      key: (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_1__.getPublic)(topicPrivKey).toString(\"hex\"),\n      // already padded\n      data: encryptedData,\n      signature: signature.toString(\"hex\"),\n      timeout: this.options.timeout,\n      namespace: this.options.namespace,\n      sameIpCheck: this.options.sameIpCheck,\n      sameOriginCheck: this.options.sameOriginCheck\n    };\n    return (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.post)(`${this.options.serverUrl}/channel/set`, fetchBody);\n  }\n  async subscribe(topic) {\n    let isPromisePending = true;\n    const topicPrivKey = (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_3__.keccak256)(Buffer.from(topic, \"utf8\"));\n    const topicPubKey = (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_1__.getPublic)(topicPrivKey).toString(\"hex\"); // already padded\n    const currentSocketConnection = this.getSocketConnection();\n    if (currentSocketConnection.connected) {\n      log.debug(\"already connected with socket\");\n      currentSocketConnection.emit(\"check_auth_status\", topicPubKey, {\n        namespace: this.options.namespace,\n        sameIpCheck: this.options.sameIpCheck,\n        sameOriginCheck: this.options.sameOriginCheck\n      });\n    } else {\n      currentSocketConnection.once(\"connect\", () => {\n        log.debug(\"connected with socket\");\n        currentSocketConnection.emit(\"check_auth_status\", topicPubKey, {\n          namespace: this.options.namespace,\n          sameIpCheck: this.options.sameIpCheck,\n          sameOriginCheck: this.options.sameOriginCheck\n        });\n      });\n    }\n    const reconnect = () => {\n      currentSocketConnection.once(\"connect\", async () => {\n        log.debug(\"connected with socket using reconnect\");\n        if (isPromisePending) currentSocketConnection.emit(\"check_auth_status\", topicPubKey, {\n          namespace: this.options.namespace,\n          sameIpCheck: this.options.sameIpCheck,\n          sameOriginCheck: this.options.sameOriginCheck\n        });\n      });\n    };\n    const visibilityListener = () => {\n      if (!isPromisePending) document.removeEventListener(\"visibilitychange\", visibilityListener);\n      // if not connected, then wait for connection and ping server for latest msg.\n      if (!currentSocketConnection.connected && document.visibilityState === \"visible\") {\n        reconnect();\n      }\n    };\n    const disconnectListener = () => {\n      log.debug(\"socket disconnected\", isPromisePending);\n      if (isPromisePending) {\n        log.error(\"socket disconnected unexpectedly, reconnecting socket\");\n        reconnect();\n      } else {\n        currentSocketConnection.removeListener(\"disconnect\", disconnectListener);\n      }\n    };\n    currentSocketConnection.on(\"disconnect\", disconnectListener);\n    const returnPromise = new Promise((resolve, reject) => {\n      const listener = async ev => {\n        try {\n          const decData = await (0,_toruslabs_metadata_helpers__WEBPACK_IMPORTED_MODULE_3__.decryptData)(topicPrivKey.toString(\"hex\"), ev);\n          log.info(\"got data\", decData);\n          resolve(decData);\n        } catch (error) {\n          log.error(error);\n          reject(error);\n        } finally {\n          isPromisePending = false;\n          document.removeEventListener(\"visibilitychange\", visibilityListener);\n        }\n      };\n      log.info(\"listening to\", `${topicPubKey}_success`);\n      currentSocketConnection.once(`${topicPubKey}_success`, listener);\n    });\n    if (typeof document !== \"undefined\") document.addEventListener(\"visibilitychange\", visibilityListener);\n    return returnPromise;\n  }\n  cleanup() {\n    if (this.SOCKET_CONN) {\n      this.SOCKET_CONN.disconnect();\n      this.SOCKET_CONN = null;\n    }\n  }\n  getSocketConnection() {\n    if (this.SOCKET_CONN) return this.SOCKET_CONN;\n    const localSocketConnection = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_4__.io)(this.options.serverUrl, {\n      transports: [\"websocket\", \"polling\"],\n      // use WebSocket first, if available\n      withCredentials: true,\n      reconnectionDelayMax: 10000,\n      reconnectionAttempts: 10\n    });\n    localSocketConnection.on(\"connect_error\", err => {\n      // revert to classic upgrade\n      localSocketConnection.io.opts.transports = [\"polling\", \"websocket\"];\n      log.error(\"connect error\", err);\n    });\n    localSocketConnection.on(\"connect\", async () => {\n      const {\n        engine\n      } = localSocketConnection.io;\n      log.debug(\"initially connected to\", engine.transport.name); // in most cases, prints \"polling\"\n      engine.once(\"upgrade\", () => {\n        // called when the transport is upgraded (i.e. from HTTP long-polling to WebSocket)\n        log.debug(\"upgraded\", engine.transport.name); // in most cases, prints \"websocket\"\n      });\n      engine.once(\"close\", reason => {\n        // called when the underlying connection is closed\n        log.debug(\"connection closed\", reason);\n      });\n    });\n    localSocketConnection.on(\"error\", err => {\n      log.error(\"socket errored\", err);\n      localSocketConnection.disconnect();\n    });\n    this.SOCKET_CONN = localSocketConnection;\n    return this.SOCKET_CONN;\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0B0b3J1c2xhYnMrc2VjdXJlLXB1Yi1zdWJAMC4yLjBfQGJhYmVsK3J1bnRpbWVANy4yOC40L25vZGVfbW9kdWxlcy9AdG9ydXNsYWJzL3NlY3VyZS1wdWItc3ViL2Rpc3Qvc2VjdXJlUHViU3ViLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBb0U7QUFDZDtBQUNNO0FBQ3NCO0FBQzVDO0FBQ1Q7O0FBRTdCLFVBQVUseURBQWU7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBLElBQUksNEVBQWU7QUFDbkIsSUFBSSw0RUFBZTtBQUNuQjtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLElBQUksb0VBQVc7QUFDZjtBQUNBO0FBQ0EseUJBQXlCLHNFQUFTO0FBQ2xDLGdDQUFnQyx3RUFBVztBQUMzQyw0QkFBNEIseURBQUksZUFBZSxzRUFBUztBQUN4RDtBQUNBLFdBQVcsOERBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkRBQUksSUFBSSx1QkFBdUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNFQUFTO0FBQ2xDLHdCQUF3Qiw4REFBUyxnQ0FBZ0M7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msd0VBQVc7QUFDM0M7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFlBQVk7QUFDOUMsc0NBQXNDLFlBQVk7QUFDbEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msb0RBQUU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1Isa0VBQWtFO0FBQ2xFO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUV3QiIsInNvdXJjZXMiOlsid2VicGFjazovL0Bjb2xsZWN0aWJsZS93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0B0b3J1c2xhYnMrc2VjdXJlLXB1Yi1zdWJAMC4yLjBfQGJhYmVsK3J1bnRpbWVANy4yOC40L25vZGVfbW9kdWxlcy9AdG9ydXNsYWJzL3NlY3VyZS1wdWItc3ViL2Rpc3Qvc2VjdXJlUHViU3ViLmVzbS5qcz85YWQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSc7XG5pbXBvcnQgeyBzaWduLCBnZXRQdWJsaWMgfSBmcm9tICdAdG9ydXNsYWJzL2VjY3J5cHRvJztcbmltcG9ydCB7IHNldExvZ0xldmVsLCBwb3N0IH0gZnJvbSAnQHRvcnVzbGFicy9odHRwLWhlbHBlcnMnO1xuaW1wb3J0IHsga2VjY2FrMjU2LCBlbmNyeXB0RGF0YSwgZGVjcnlwdERhdGEgfSBmcm9tICdAdG9ydXNsYWJzL21ldGFkYXRhLWhlbHBlcnMnO1xuaW1wb3J0IHsgaW8gfSBmcm9tICdzb2NrZXQuaW8tY2xpZW50JztcbmltcG9ydCBsb2ckMSBmcm9tICdsb2dsZXZlbCc7XG5cbnZhciBsb2cgPSBsb2ckMS5nZXRMb2dnZXIoXCJTZWN1cmVQdWJTdWJcIik7XG5cbmNsYXNzIFNlY3VyZVB1YlN1YiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRpb25zXCIsIHZvaWQgMCk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiU09DS0VUX0NPTk5cIiwgbnVsbCk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLm9wdGlvbnMudGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCA2MDA7IC8vIDEwIG1pbnMgaXMgZGVmYXVsdCB0aW1lb3V0XG4gICAgdGhpcy5vcHRpb25zLnNlcnZlclVybCA9IG9wdGlvbnMuc2VydmVyVXJsIHx8IFwiaHR0cHM6Ly9zZXNzaW9uLndlYjNhdXRoLmlvXCI7XG4gICAgdGhpcy5vcHRpb25zLmVuYWJsZUxvZ2dpbmcgPSBvcHRpb25zLmVuYWJsZUxvZ2dpbmcgfHwgZmFsc2U7XG4gICAgdGhpcy5vcHRpb25zLm5hbWVzcGFjZSA9IG9wdGlvbnMubmFtZXNwYWNlIHx8IFwiXCI7XG4gICAgdGhpcy5vcHRpb25zLnNhbWVJcENoZWNrID0gb3B0aW9ucy5zYW1lSXBDaGVjayB8fCBmYWxzZTtcbiAgICB0aGlzLm9wdGlvbnMuc2FtZU9yaWdpbkNoZWNrID0gb3B0aW9ucy5zYW1lT3JpZ2luQ2hlY2sgfHwgZmFsc2U7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5lbmFibGVMb2dnaW5nKSBsb2cuZW5hYmxlQWxsKCk7ZWxzZSBsb2cuZGlzYWJsZUFsbCgpO1xuICB9XG4gIHN0YXRpYyBzZXRMb2dMZXZlbChsZXZlbCkge1xuICAgIGxvZy5zZXRMZXZlbChsZXZlbCk7XG4gICAgc2V0TG9nTGV2ZWwobGV2ZWwpO1xuICB9XG4gIGFzeW5jIHB1Ymxpc2godG9waWMsIG1lc3NhZ2UpIHtcbiAgICBjb25zdCB0b3BpY1ByaXZLZXkgPSBrZWNjYWsyNTYoQnVmZmVyLmZyb20odG9waWMsIFwidXRmOFwiKSk7XG4gICAgY29uc3QgZW5jcnlwdGVkRGF0YSA9IGF3YWl0IGVuY3J5cHREYXRhKHRvcGljUHJpdktleS50b1N0cmluZyhcImhleFwiKSwgbWVzc2FnZSk7XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgc2lnbih0b3BpY1ByaXZLZXksIGtlY2NhazI1NihCdWZmZXIuZnJvbShlbmNyeXB0ZWREYXRhLCBcInV0ZjhcIikpKTtcbiAgICBjb25zdCBmZXRjaEJvZHkgPSB7XG4gICAgICBrZXk6IGdldFB1YmxpYyh0b3BpY1ByaXZLZXkpLnRvU3RyaW5nKFwiaGV4XCIpLFxuICAgICAgLy8gYWxyZWFkeSBwYWRkZWRcbiAgICAgIGRhdGE6IGVuY3J5cHRlZERhdGEsXG4gICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZS50b1N0cmluZyhcImhleFwiKSxcbiAgICAgIHRpbWVvdXQ6IHRoaXMub3B0aW9ucy50aW1lb3V0LFxuICAgICAgbmFtZXNwYWNlOiB0aGlzLm9wdGlvbnMubmFtZXNwYWNlLFxuICAgICAgc2FtZUlwQ2hlY2s6IHRoaXMub3B0aW9ucy5zYW1lSXBDaGVjayxcbiAgICAgIHNhbWVPcmlnaW5DaGVjazogdGhpcy5vcHRpb25zLnNhbWVPcmlnaW5DaGVja1xuICAgIH07XG4gICAgcmV0dXJuIHBvc3QoYCR7dGhpcy5vcHRpb25zLnNlcnZlclVybH0vY2hhbm5lbC9zZXRgLCBmZXRjaEJvZHkpO1xuICB9XG4gIGFzeW5jIHN1YnNjcmliZSh0b3BpYykge1xuICAgIGxldCBpc1Byb21pc2VQZW5kaW5nID0gdHJ1ZTtcbiAgICBjb25zdCB0b3BpY1ByaXZLZXkgPSBrZWNjYWsyNTYoQnVmZmVyLmZyb20odG9waWMsIFwidXRmOFwiKSk7XG4gICAgY29uc3QgdG9waWNQdWJLZXkgPSBnZXRQdWJsaWModG9waWNQcml2S2V5KS50b1N0cmluZyhcImhleFwiKTsgLy8gYWxyZWFkeSBwYWRkZWRcbiAgICBjb25zdCBjdXJyZW50U29ja2V0Q29ubmVjdGlvbiA9IHRoaXMuZ2V0U29ja2V0Q29ubmVjdGlvbigpO1xuICAgIGlmIChjdXJyZW50U29ja2V0Q29ubmVjdGlvbi5jb25uZWN0ZWQpIHtcbiAgICAgIGxvZy5kZWJ1ZyhcImFscmVhZHkgY29ubmVjdGVkIHdpdGggc29ja2V0XCIpO1xuICAgICAgY3VycmVudFNvY2tldENvbm5lY3Rpb24uZW1pdChcImNoZWNrX2F1dGhfc3RhdHVzXCIsIHRvcGljUHViS2V5LCB7XG4gICAgICAgIG5hbWVzcGFjZTogdGhpcy5vcHRpb25zLm5hbWVzcGFjZSxcbiAgICAgICAgc2FtZUlwQ2hlY2s6IHRoaXMub3B0aW9ucy5zYW1lSXBDaGVjayxcbiAgICAgICAgc2FtZU9yaWdpbkNoZWNrOiB0aGlzLm9wdGlvbnMuc2FtZU9yaWdpbkNoZWNrXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFNvY2tldENvbm5lY3Rpb24ub25jZShcImNvbm5lY3RcIiwgKCkgPT4ge1xuICAgICAgICBsb2cuZGVidWcoXCJjb25uZWN0ZWQgd2l0aCBzb2NrZXRcIik7XG4gICAgICAgIGN1cnJlbnRTb2NrZXRDb25uZWN0aW9uLmVtaXQoXCJjaGVja19hdXRoX3N0YXR1c1wiLCB0b3BpY1B1YktleSwge1xuICAgICAgICAgIG5hbWVzcGFjZTogdGhpcy5vcHRpb25zLm5hbWVzcGFjZSxcbiAgICAgICAgICBzYW1lSXBDaGVjazogdGhpcy5vcHRpb25zLnNhbWVJcENoZWNrLFxuICAgICAgICAgIHNhbWVPcmlnaW5DaGVjazogdGhpcy5vcHRpb25zLnNhbWVPcmlnaW5DaGVja1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZWNvbm5lY3QgPSAoKSA9PiB7XG4gICAgICBjdXJyZW50U29ja2V0Q29ubmVjdGlvbi5vbmNlKFwiY29ubmVjdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGxvZy5kZWJ1ZyhcImNvbm5lY3RlZCB3aXRoIHNvY2tldCB1c2luZyByZWNvbm5lY3RcIik7XG4gICAgICAgIGlmIChpc1Byb21pc2VQZW5kaW5nKSBjdXJyZW50U29ja2V0Q29ubmVjdGlvbi5lbWl0KFwiY2hlY2tfYXV0aF9zdGF0dXNcIiwgdG9waWNQdWJLZXksIHtcbiAgICAgICAgICBuYW1lc3BhY2U6IHRoaXMub3B0aW9ucy5uYW1lc3BhY2UsXG4gICAgICAgICAgc2FtZUlwQ2hlY2s6IHRoaXMub3B0aW9ucy5zYW1lSXBDaGVjayxcbiAgICAgICAgICBzYW1lT3JpZ2luQ2hlY2s6IHRoaXMub3B0aW9ucy5zYW1lT3JpZ2luQ2hlY2tcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHZpc2liaWxpdHlMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIGlmICghaXNQcm9taXNlUGVuZGluZykgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdmlzaWJpbGl0eUxpc3RlbmVyKTtcbiAgICAgIC8vIGlmIG5vdCBjb25uZWN0ZWQsIHRoZW4gd2FpdCBmb3IgY29ubmVjdGlvbiBhbmQgcGluZyBzZXJ2ZXIgZm9yIGxhdGVzdCBtc2cuXG4gICAgICBpZiAoIWN1cnJlbnRTb2NrZXRDb25uZWN0aW9uLmNvbm5lY3RlZCAmJiBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiKSB7XG4gICAgICAgIHJlY29ubmVjdCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZGlzY29ubmVjdExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgbG9nLmRlYnVnKFwic29ja2V0IGRpc2Nvbm5lY3RlZFwiLCBpc1Byb21pc2VQZW5kaW5nKTtcbiAgICAgIGlmIChpc1Byb21pc2VQZW5kaW5nKSB7XG4gICAgICAgIGxvZy5lcnJvcihcInNvY2tldCBkaXNjb25uZWN0ZWQgdW5leHBlY3RlZGx5LCByZWNvbm5lY3Rpbmcgc29ja2V0XCIpO1xuICAgICAgICByZWNvbm5lY3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRTb2NrZXRDb25uZWN0aW9uLnJlbW92ZUxpc3RlbmVyKFwiZGlzY29ubmVjdFwiLCBkaXNjb25uZWN0TGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH07XG4gICAgY3VycmVudFNvY2tldENvbm5lY3Rpb24ub24oXCJkaXNjb25uZWN0XCIsIGRpc2Nvbm5lY3RMaXN0ZW5lcik7XG4gICAgY29uc3QgcmV0dXJuUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gYXN5bmMgZXYgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRlY0RhdGEgPSBhd2FpdCBkZWNyeXB0RGF0YSh0b3BpY1ByaXZLZXkudG9TdHJpbmcoXCJoZXhcIiksIGV2KTtcbiAgICAgICAgICBsb2cuaW5mbyhcImdvdCBkYXRhXCIsIGRlY0RhdGEpO1xuICAgICAgICAgIHJlc29sdmUoZGVjRGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nLmVycm9yKGVycm9yKTtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlzUHJvbWlzZVBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB2aXNpYmlsaXR5TGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgbG9nLmluZm8oXCJsaXN0ZW5pbmcgdG9cIiwgYCR7dG9waWNQdWJLZXl9X3N1Y2Nlc3NgKTtcbiAgICAgIGN1cnJlbnRTb2NrZXRDb25uZWN0aW9uLm9uY2UoYCR7dG9waWNQdWJLZXl9X3N1Y2Nlc3NgLCBsaXN0ZW5lcik7XG4gICAgfSk7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdmlzaWJpbGl0eUxpc3RlbmVyKTtcbiAgICByZXR1cm4gcmV0dXJuUHJvbWlzZTtcbiAgfVxuICBjbGVhbnVwKCkge1xuICAgIGlmICh0aGlzLlNPQ0tFVF9DT05OKSB7XG4gICAgICB0aGlzLlNPQ0tFVF9DT05OLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMuU09DS0VUX0NPTk4gPSBudWxsO1xuICAgIH1cbiAgfVxuICBnZXRTb2NrZXRDb25uZWN0aW9uKCkge1xuICAgIGlmICh0aGlzLlNPQ0tFVF9DT05OKSByZXR1cm4gdGhpcy5TT0NLRVRfQ09OTjtcbiAgICBjb25zdCBsb2NhbFNvY2tldENvbm5lY3Rpb24gPSBpbyh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG4gICAgICB0cmFuc3BvcnRzOiBbXCJ3ZWJzb2NrZXRcIiwgXCJwb2xsaW5nXCJdLFxuICAgICAgLy8gdXNlIFdlYlNvY2tldCBmaXJzdCwgaWYgYXZhaWxhYmxlXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICByZWNvbm5lY3Rpb25EZWxheU1heDogMTAwMDAsXG4gICAgICByZWNvbm5lY3Rpb25BdHRlbXB0czogMTBcbiAgICB9KTtcbiAgICBsb2NhbFNvY2tldENvbm5lY3Rpb24ub24oXCJjb25uZWN0X2Vycm9yXCIsIGVyciA9PiB7XG4gICAgICAvLyByZXZlcnQgdG8gY2xhc3NpYyB1cGdyYWRlXG4gICAgICBsb2NhbFNvY2tldENvbm5lY3Rpb24uaW8ub3B0cy50cmFuc3BvcnRzID0gW1wicG9sbGluZ1wiLCBcIndlYnNvY2tldFwiXTtcbiAgICAgIGxvZy5lcnJvcihcImNvbm5lY3QgZXJyb3JcIiwgZXJyKTtcbiAgICB9KTtcbiAgICBsb2NhbFNvY2tldENvbm5lY3Rpb24ub24oXCJjb25uZWN0XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZW5naW5lXG4gICAgICB9ID0gbG9jYWxTb2NrZXRDb25uZWN0aW9uLmlvO1xuICAgICAgbG9nLmRlYnVnKFwiaW5pdGlhbGx5IGNvbm5lY3RlZCB0b1wiLCBlbmdpbmUudHJhbnNwb3J0Lm5hbWUpOyAvLyBpbiBtb3N0IGNhc2VzLCBwcmludHMgXCJwb2xsaW5nXCJcbiAgICAgIGVuZ2luZS5vbmNlKFwidXBncmFkZVwiLCAoKSA9PiB7XG4gICAgICAgIC8vIGNhbGxlZCB3aGVuIHRoZSB0cmFuc3BvcnQgaXMgdXBncmFkZWQgKGkuZS4gZnJvbSBIVFRQIGxvbmctcG9sbGluZyB0byBXZWJTb2NrZXQpXG4gICAgICAgIGxvZy5kZWJ1ZyhcInVwZ3JhZGVkXCIsIGVuZ2luZS50cmFuc3BvcnQubmFtZSk7IC8vIGluIG1vc3QgY2FzZXMsIHByaW50cyBcIndlYnNvY2tldFwiXG4gICAgICB9KTtcbiAgICAgIGVuZ2luZS5vbmNlKFwiY2xvc2VcIiwgcmVhc29uID0+IHtcbiAgICAgICAgLy8gY2FsbGVkIHdoZW4gdGhlIHVuZGVybHlpbmcgY29ubmVjdGlvbiBpcyBjbG9zZWRcbiAgICAgICAgbG9nLmRlYnVnKFwiY29ubmVjdGlvbiBjbG9zZWRcIiwgcmVhc29uKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGxvY2FsU29ja2V0Q29ubmVjdGlvbi5vbihcImVycm9yXCIsIGVyciA9PiB7XG4gICAgICBsb2cuZXJyb3IoXCJzb2NrZXQgZXJyb3JlZFwiLCBlcnIpO1xuICAgICAgbG9jYWxTb2NrZXRDb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcbiAgICB9KTtcbiAgICB0aGlzLlNPQ0tFVF9DT05OID0gbG9jYWxTb2NrZXRDb25uZWN0aW9uO1xuICAgIHJldHVybiB0aGlzLlNPQ0tFVF9DT05OO1xuICB9XG59XG5cbmV4cG9ydCB7IFNlY3VyZVB1YlN1YiB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@toruslabs+secure-pub-sub@0.2.0_@babel+runtime@7.28.4/node_modules/@toruslabs/secure-pub-sub/dist/securePubSub.esm.js\n");

/***/ })

};
;